<UserControl x:Class="Lazarus.Desktop.Views.Video.TemporalEffectsView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 mc:Ignorable="d"
			 Background="{StaticResource PrimaryDarkBrush}">
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="300" MinWidth="200"/>
			<ColumnDefinition Width="*"/>
			<ColumnDefinition Width="300" MinWidth="200"/>
		</Grid.ColumnDefinitions>

		<!-- Left Panel: Temporal Effects Controls -->
		<Border Grid.Column="0"
				Background="{StaticResource SecondaryDarkBrush}"
				CornerRadius="8,0,0,8"
				Margin="8,8,4,8">
			<ScrollViewer VerticalScrollBarVisibility="Auto">
				<StackPanel Margin="12">
					<TextBlock Text="Temporal Effects"
							   Foreground="{StaticResource TextPrimaryBrush}"
							   FontSize="18"
							   FontWeight="Bold"
							   Margin="0,0,0,16"/>

					<!-- Effect Type -->
					<TextBlock Text="Effect Type:"
							   Foreground="{StaticResource TextPrimaryBrush}"
							   Margin="0,0,0,6"/>
					<ComboBox SelectedValue="{Binding SelectedEffectType}"
							  Style="{StaticResource DarkComboBoxStyle}"
							  Height="32"
							  Margin="0,0,0,16">
						<ComboBoxItem Content="Time Stretch" IsSelected="True"/>
						<ComboBoxItem Content="Frame Interpolation"/>
						<ComboBoxItem Content="Temporal Smoothing"/>
						<ComboBoxItem Content="Motion Blur"/>
						<ComboBoxItem Content="Flickering Removal"/>
						<ComboBoxItem Content="Stabilization"/>
					</ComboBox>

					<!-- Time Stretch Settings -->
					<StackPanel Visibility="{Binding IsTimeStretchSelected, Converter={StaticResource BooleanToVisibilityConverter}}">
						<TextBlock Text="Speed Multiplier:"
								   Foreground="{StaticResource TextPrimaryBrush}"
								   Margin="0,0,0,4"/>
						<StackPanel Orientation="Horizontal" Margin="0,0,0,12">
							<Slider Value="{Binding SpeedMultiplier}"
									Minimum="0.1"
									Maximum="5.0"
									Width="190"
									VerticalAlignment="Center"/>
							<TextBlock Text="{Binding SpeedMultiplier, StringFormat='F1x'}"
									   Foreground="{StaticResource TextPrimaryBrush}"
									   Width="50"
									   Margin="8,0,0,0"
									   VerticalAlignment="Center"/>
						</StackPanel>
					</StackPanel>

					<!-- Frame Interpolation Settings -->
					<StackPanel Visibility="{Binding IsFrameInterpolationSelected, Converter={StaticResource BooleanToVisibilityConverter}}">
						<TextBlock Text="Target Frame Rate:"
								   Foreground="{StaticResource TextPrimaryBrush}"
								   Margin="0,0,0,6"/>
						<ComboBox SelectedValue="{Binding TargetFrameRate}"
								  Style="{StaticResource DarkComboBoxStyle}"
								  Height="32"
								  Margin="0,0,0,12">
							<ComboBoxItem Content="60" />
							<ComboBoxItem Content="120" />
							<ComboBoxItem Content="240" IsSelected="True"/>
						</ComboBox>
						
						<TextBlock Text="Interpolation Quality:"
								   Foreground="{StaticResource TextPrimaryBrush}"
								   Margin="0,0,0,4"/>
						<StackPanel Orientation="Horizontal" Margin="0,0,0,12">
							<Slider Value="{Binding InterpolationQuality}"
									Minimum="1"
									Maximum="10"
									Width="190"
									VerticalAlignment="Center"/>
							<TextBlock Text="{Binding InterpolationQuality}"
									   Foreground="{StaticResource TextPrimaryBrush}"
									   Width="50"
									   Margin="8,0,0,0"
									   VerticalAlignment="Center"/>
						</StackPanel>
					</StackPanel>

					<!-- Motion Blur Settings -->
					<StackPanel Visibility="{Binding IsMotionBlurSelected, Converter={StaticResource BooleanToVisibilityConverter}}">
						<TextBlock Text="Blur Intensity:"
								   Foreground="{StaticResource TextPrimaryBrush}"
								   Margin="0,0,0,4"/>
						<StackPanel Orientation="Horizontal" Margin="0,0,0,12">
							<Slider Value="{Binding BlurIntensity}"
									Minimum="0"
									Maximum="1"
									Width="190"
									VerticalAlignment="Center"/>
							<TextBlock Text="{Binding BlurIntensity, StringFormat=F2}"
									   Foreground="{StaticResource TextPrimaryBrush}"
									   Width="50"
									   Margin="8,0,0,0"
									   VerticalAlignment="Center"/>
						</StackPanel>
						
						<CheckBox Content="Adaptive Blur"
								  IsChecked="{Binding UseAdaptiveBlur}"
								  Foreground="{StaticResource TextPrimaryBrush}"
								  Margin="0,4,0,12"/>
					</StackPanel>

					<!-- Stabilization Settings -->
					<StackPanel Visibility="{Binding IsStabilizationSelected, Converter={StaticResource BooleanToVisibilityConverter}}">
						<TextBlock Text="Stabilization Strength:"
								   Foreground="{StaticResource TextPrimaryBrush}"
								   Margin="0,0,0,4"/>
						<StackPanel Orientation="Horizontal" Margin="0,0,0,12">
							<Slider Value="{Binding StabilizationStrength}"
									Minimum="0"
									Maximum="1"
									Width="190"
									VerticalAlignment="Center"/>
							<TextBlock Text="{Binding StabilizationStrength, StringFormat=F2}"
									   Foreground="{StaticResource TextPrimaryBrush}"
									   Width="50"
									   Margin="8,0,0,0"
									   VerticalAlignment="Center"/>
						</StackPanel>
						
						<CheckBox Content="Crop to Fit"
								  IsChecked="{Binding CropToFit}"
								  Foreground="{StaticResource TextPrimaryBrush}"
								  Margin="0,4,0,12"/>
					</StackPanel>

					<!-- Common Settings -->
					<TextBlock Text="Processing Options"
							   Foreground="{StaticResource TextPrimaryBrush}"
							   FontSize="14"
							   FontWeight="Bold"
							   Margin="0,16,0,8"/>

					<CheckBox Content="Preserve Original Duration"
							  IsChecked="{Binding PreserveOriginalDuration}"
							  Foreground="{StaticResource TextPrimaryBrush}"
							  Margin="0,0,0,10"/>

					<CheckBox Content="High Quality Mode"
							  IsChecked="{Binding HighQualityMode}"
							  Foreground="{StaticResource TextPrimaryBrush}"
							  Margin="0,0,0,10"/>

					<TextBlock Text="Processing Priority:"
							   Foreground="{StaticResource TextPrimaryBrush}"
							   Margin="0,8,0,4"/>
					<ComboBox SelectedValue="{Binding ProcessingPriority}"
							  Style="{StaticResource DarkComboBoxStyle}"
							  Margin="0,0,0,16">
						<ComboBoxItem Content="Low" />
						<ComboBoxItem Content="Normal" IsSelected="True"/>
						<ComboBoxItem Content="High" />
					</ComboBox>

					<!-- Apply Button -->
					<Button Content="Apply Effect"
							Command="{Binding ApplyEffectCommand}"
							Style="{StaticResource PrimaryButtonStyle}"
							Height="40"
							Margin="0,0,0,0"/>
				</StackPanel>
			</ScrollViewer>
		</Border>

		<!-- Left Splitter -->
		<GridSplitter Grid.Column="0"
					  Width="4"
					  Background="{StaticResource BorderBrush}"
					  HorizontalAlignment="Right"
					  VerticalAlignment="Stretch"/>

		<!-- Center: Effect Preview -->
		<Border Grid.Column="1"
				Background="{StaticResource TertiaryDarkBrush}"
				Margin="0,8">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="Auto"/>
				</Grid.RowDefinitions>

				<TextBlock Grid.Row="0"
						   Text="Effect Preview"
						   Foreground="{StaticResource TextPrimaryBrush}"
						   FontSize="16"
						   FontWeight="Bold"
						   HorizontalAlignment="Center"
						   Margin="0,12,0,12"/>

				<Grid Grid.Row="1">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>

					<!-- Before -->
					<StackPanel Grid.Column="0" Margin="8">
						<TextBlock Text="Before"
								   Foreground="{StaticResource TextPrimaryBrush}"
								   HorizontalAlignment="Center"
								   Margin="0,0,0,8"/>
						<Border Background="#2a2a2a"
								Height="200"
								CornerRadius="8">
							<StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
								<TextBlock Text="ðŸŽ¬"
										   Foreground="{StaticResource TextPrimaryBrush}"
										   FontSize="32"
										   HorizontalAlignment="Center"/>
								<TextBlock Text="Original Video"
										   Foreground="{StaticResource TextSecondaryBrush}"
										   HorizontalAlignment="Center"
										   Margin="0,8,0,0"/>
							</StackPanel>
						</Border>
					</StackPanel>

					<!-- After -->
					<StackPanel Grid.Column="1" Margin="8">
						<TextBlock Text="After"
								   Foreground="{StaticResource TextPrimaryBrush}"
								   HorizontalAlignment="Center"
								   Margin="0,0,0,8"/>
						<Border Background="#2a2a2a"
								Height="200"
								CornerRadius="8">
							<Grid>
								<StackPanel HorizontalAlignment="Center" 
											VerticalAlignment="Center"
											Visibility="{Binding HasPreview, Converter={StaticResource BooleanToVisibilityConverter}}">
									<TextBlock Text="âœ¨"
											   Foreground="{StaticResource AccentRedBrush}"
											   FontSize="32"
											   HorizontalAlignment="Center"/>
									<TextBlock Text="Effect Applied"
											   Foreground="{StaticResource TextPrimaryBrush}"
											   HorizontalAlignment="Center"
											   Margin="0,8,0,0"/>
								</StackPanel>
								<TextBlock Text="Effect preview will appear here"
										   Foreground="{StaticResource TextSecondaryBrush}"
										   HorizontalAlignment="Center"
										   VerticalAlignment="Center"
										   Visibility="{Binding HasPreview, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
							</Grid>
						</Border>
					</StackPanel>
				</Grid>

				<!-- Processing Controls -->
				<StackPanel Grid.Row="2"
							Orientation="Horizontal"
							HorizontalAlignment="Center"
							Margin="0,12">
					<Button Content="Preview"
							Command="{Binding PreviewEffectCommand}"
							Style="{StaticResource SecondaryButtonStyle}"
							Width="85"
							Height="32"
							Margin="4"/>
					<Button Content="Reset"
							Command="{Binding ResetEffectCommand}"
							Style="{StaticResource SecondaryButtonStyle}"
							Width="85"
							Height="32"
							Margin="4"/>
					<Button Content="Export"
							Command="{Binding ExportEffectCommand}"
							Style="{StaticResource SecondaryButtonStyle}"
							Width="85"
							Height="32"
							Margin="4"/>
				</StackPanel>

				<!-- Progress Indicator -->
				<StackPanel HorizontalAlignment="Center"
							VerticalAlignment="Bottom"
							Margin="0,0,0,20"
							Visibility="{Binding IsProcessing, Converter={StaticResource BooleanToVisibilityConverter}}">
					<ProgressBar Value="{Binding ProcessingProgress}"
								 Minimum="0"
								 Maximum="100"
								 Height="6"
								 Width="350"
								 Background="{StaticResource SecondaryDarkBrush}"
								 Foreground="{StaticResource AccentRedBrush}"/>
					<TextBlock Text="{Binding ProcessingStatus}"
							   Foreground="{StaticResource TextPrimaryBrush}"
							   HorizontalAlignment="Center"
							   Margin="0,8,0,0"/>
				</StackPanel>
			</Grid>
		</Border>

		<!-- Right Splitter -->
		<GridSplitter Grid.Column="1"
					  Width="4"
					  Background="{StaticResource BorderBrush}"
					  HorizontalAlignment="Right"
					  VerticalAlignment="Stretch"/>

		<!-- Right Panel: Effect Templates -->
		<Border Grid.Column="2"
				Background="{StaticResource SecondaryDarkBrush}"
				CornerRadius="0,8,8,0"
				Margin="4,8,8,8">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<TextBlock Grid.Row="0"
						   Text="Effect Templates"
						   Foreground="{StaticResource TextPrimaryBrush}"
						   FontSize="14"
						   FontWeight="Bold"
						   Margin="12,12,12,8"/>

				<ListBox Grid.Row="1"
						 ItemsSource="{Binding EffectTemplates}"
						 Background="Transparent"
						 BorderThickness="0"
						 Margin="12,0">
					<ListBox.ItemTemplate>
						<DataTemplate>
							<Border Background="{StaticResource TertiaryDarkBrush}"
									CornerRadius="4"
									Margin="0,2"
									Padding="8">
								<StackPanel>
									<StackPanel Orientation="Horizontal">
										<TextBlock Text="{Binding Icon}"
												   FontSize="16"
												   VerticalAlignment="Center"
												   Margin="0,0,8,0"/>
										<TextBlock Text="{Binding Name}"
												   Foreground="{StaticResource TextPrimaryBrush}"
												   FontSize="12"
												   FontWeight="Bold"
												   VerticalAlignment="Center"/>
									</StackPanel>
									<TextBlock Text="{Binding Description}"
											   Foreground="{StaticResource TextSecondaryBrush}"
											   TextWrapping="Wrap"
											   FontSize="10"
											   Margin="0,4,0,0"/>
									<StackPanel Orientation="Horizontal" Margin="0,4,0,0">
										<Button Content="Apply"
												Command="{Binding DataContext.ApplyTemplateCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
												CommandParameter="{Binding}"
												Style="{StaticResource SecondaryButtonStyle}"
												Height="24"
												Width="55"
												FontSize="9"/>
										<Button Content="Preview"
												Command="{Binding DataContext.PreviewTemplateCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
												CommandParameter="{Binding}"
												Style="{StaticResource SecondaryButtonStyle}"
												Height="24"
												Width="55"
												FontSize="9"
												Margin="4,0,0,0"/>
									</StackPanel>
								</StackPanel>
							</Border>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>
			</Grid>
		</Border>
	</Grid>
</UserControl>