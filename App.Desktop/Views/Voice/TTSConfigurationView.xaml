<UserControl x:Class="Lazarus.Desktop.Views.Voice.TTSConfigurationView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 mc:Ignorable="d"
			 Background="{DynamicResource PrimaryDarkBrush}">
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="300" MinWidth="200"/>
			<ColumnDefinition Width="*"/>
			<ColumnDefinition Width="300" MinWidth="200"/>
		</Grid.ColumnDefinitions>

		<!-- Left Panel: TTS Configuration -->
		<Border Grid.Column="0"
				Background="{DynamicResource SecondaryDarkBrush}"
				CornerRadius="8,0,0,8"
				Margin="8,8,4,8">
			<ScrollViewer VerticalScrollBarVisibility="Auto">
				<StackPanel Margin="12">
					<TextBlock Text="TTS Configuration"
							   Foreground="{DynamicResource TextPrimaryBrush}"
							   FontSize="18"
							   FontWeight="Bold"
							   Margin="0,0,0,16"/>

					<!-- Voice Model Selection -->
					<TextBlock Text="Voice Model:"
							   Foreground="{DynamicResource TextPrimaryBrush}"
							   Margin="0,0,0,4"/>
					<ComboBox SelectedValue="{Binding SelectedVoiceModel}"
							  Style="{StaticResource DarkComboBoxStyle}"
							  Margin="0,0,0,12">
						<ComboBoxItem Content="Female - Sarah (EN)" IsSelected="True"/>
						<ComboBoxItem Content="Male - David (EN)"/>
						<ComboBoxItem Content="Female - Emma (EN)"/>
						<ComboBoxItem Content="Male - James (EN)"/>
						<ComboBoxItem Content="Female - Marie (FR)"/>
						<ComboBoxItem Content="Male - Hans (DE)"/>
					</ComboBox>

					<!-- Text Input -->
					<TextBlock Text="Text to Synthesize:"
							   Foreground="{DynamicResource TextPrimaryBrush}"
							   Margin="0,0,0,4"/>
					<TextBox x:Name="SynthesisTextInput"
							 Text="{Binding TextToSynthesize, UpdateSourceTrigger=PropertyChanged}"
							 Height="100"
							 TextWrapping="Wrap"
							 AcceptsReturn="True"
							 Background="{DynamicResource TertiaryDarkBrush}"
							 Foreground="{DynamicResource TextPrimaryBrush}"
							 BorderBrush="{DynamicResource BorderBrush}"
							 Margin="0,0,0,12"/>

					<!-- Voice Parameters -->
					<TextBlock Text="Voice Parameters"
							   Foreground="{DynamicResource TextPrimaryBrush}"
							   FontSize="14"
							   FontWeight="Bold"
							   Margin="0,0,0,8"/>

					<!-- Speed -->
					<StackPanel Orientation="Horizontal" Margin="0,0,0,8">
						<TextBlock Text="Speed:"
								   Foreground="{DynamicResource TextPrimaryBrush}"
								   Width="70"/>
						<Slider Value="{Binding Speed}"
								Minimum="0.5"
								Maximum="2.0"
								Width="130"
								VerticalAlignment="Center"/>
						<TextBlock Text="{Binding Speed, StringFormat='F1x'}"
								   Foreground="{DynamicResource TextPrimaryBrush}"
								   Width="40"
								   Margin="8,0,0,0"/>
					</StackPanel>

					<!-- Pitch -->
					<StackPanel Orientation="Horizontal" Margin="0,0,0,8">
						<TextBlock Text="Pitch:"
								   Foreground="{DynamicResource TextPrimaryBrush}"
								   Width="70"/>
						<Slider Value="{Binding Pitch}"
								Minimum="-2.0"
								Maximum="2.0"
								Width="130"
								VerticalAlignment="Center"/>
						<TextBlock Text="{Binding Pitch, StringFormat=F1}"
								   Foreground="{DynamicResource TextPrimaryBrush}"
								   Width="40"
								   Margin="8,0,0,0"/>
					</StackPanel>

					<!-- Volume -->
					<StackPanel Orientation="Horizontal" Margin="0,0,0,8">
						<TextBlock Text="Volume:"
								   Foreground="{DynamicResource TextPrimaryBrush}"
								   Width="70"/>
						<Slider Value="{Binding Volume}"
								Minimum="0"
								Maximum="1.0"
								Width="130"
								VerticalAlignment="Center"/>
						<TextBlock Text="{Binding Volume, StringFormat=P0}"
								   Foreground="{DynamicResource TextPrimaryBrush}"
								   Width="40"
								   Margin="8,0,0,0"/>
					</StackPanel>

					<!-- Emotion -->
					<StackPanel Margin="0,0,0,8">
						<TextBlock Text="Emotion:"
								   Foreground="{DynamicResource TextPrimaryBrush}"
								   Margin="0,0,0,4"/>
						<ComboBox SelectedValue="{Binding SelectedEmotion}"
								  Style="{StaticResource DarkComboBoxStyle}">
							<ComboBoxItem Content="Neutral" IsSelected="True"/>
							<ComboBoxItem Content="Happy"/>
							<ComboBoxItem Content="Sad"/>
							<ComboBoxItem Content="Angry"/>
							<ComboBoxItem Content="Excited"/>
							<ComboBoxItem Content="Calm"/>
							<ComboBoxItem Content="Whisper"/>
						</ComboBox>
					</StackPanel>

					<!-- Advanced Settings -->
					<TextBlock Text="Advanced Settings"
							   Foreground="{DynamicResource TextPrimaryBrush}"
							   FontSize="14"
							   FontWeight="Bold"
							   Margin="0,12,0,8"/>

					<CheckBox Content="Add Breathing Sounds"
							  IsChecked="{Binding AddBreathingSounds}"
							  Foreground="{DynamicResource TextPrimaryBrush}"
							  Margin="0,0,0,8"/>

					<CheckBox Content="Auto Punctuation"
							  IsChecked="{Binding AutoPunctuation}"
							  Foreground="{DynamicResource TextPrimaryBrush}"
							  Margin="0,0,0,8"/>

					<!-- Synthesis Button -->
					<Button Content="Synthesize Speech"
							Command="{Binding SynthesizeCommand}"
							Style="{StaticResource PrimaryButtonStyle}"
							Height="40"
							Margin="0,16,0,0"/>
				</StackPanel>
			</ScrollViewer>
		</Border>

		<!-- Left Splitter -->
		<GridSplitter Grid.Column="0"
					  Width="4"
					  Background="{DynamicResource BorderBrush}"
					  HorizontalAlignment="Right"
					  VerticalAlignment="Stretch"/>

		<!-- Center: Audio Playback -->
		<Border Grid.Column="1"
				Background="{DynamicResource TertiaryDarkBrush}"
				Margin="0,8">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="Auto"/>
				</Grid.RowDefinitions>

				<TextBlock Grid.Row="0"
						   Text="Audio Playback"
						   Foreground="{DynamicResource TextPrimaryBrush}"
						   FontSize="16"
						   FontWeight="Bold"
						   HorizontalAlignment="Center"
						   Margin="0,12,0,12"/>

				<!-- Waveform Visualization -->
				<Border Grid.Row="1"
						Background="{DynamicResource SecondaryDarkBrush}"
						Margin="20"
						CornerRadius="8">
					<Grid>
						<Canvas x:Name="WaveformCanvas"
								Background="Transparent"
								Height="200">
							<!-- Waveform visualization would go here -->
							<Rectangle Fill="#4f46e5"
									   Width="400"
									   Height="2"
									   Canvas.Left="50"
									   Canvas.Top="99"
									   Visibility="{Binding HasAudio, Converter={StaticResource BooleanToVisibilityConverter}}"/>
							
							<TextBlock Text="🎵 Audio waveform will appear here"
									   Foreground="{DynamicResource TextSecondaryBrush}"
									   HorizontalAlignment="Center"
									   VerticalAlignment="Center"
									   Canvas.Left="150"
									   Canvas.Top="90"
									   Visibility="{Binding HasAudio, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
						</Canvas>

						<!-- Audio Playback Info -->
						<StackPanel VerticalAlignment="Bottom"
									HorizontalAlignment="Center"
									Margin="0,0,0,20"
									Visibility="{Binding HasAudio, Converter={StaticResource BooleanToVisibilityConverter}}">
							<TextBlock Text="{Binding AudioDuration, StringFormat=Duration: {0}s}"
									   Foreground="{DynamicResource TextPrimaryBrush}"
									   HorizontalAlignment="Center"
									   FontSize="12"/>
							<TextBlock Text="{Binding AudioFileSize, StringFormat=Size: {0} KB}"
									   Foreground="{DynamicResource TextSecondaryBrush}"
									   HorizontalAlignment="Center"
									   FontSize="10"/>
						</StackPanel>
					</Grid>
				</Border>

				<!-- Playback Controls -->
				<StackPanel Grid.Row="2"
							Orientation="Horizontal"
							HorizontalAlignment="Center"
							Margin="0,0,0,12">
					<Button Content="▶"
							Command="{Binding PlayAudioCommand}"
							Style="{StaticResource SecondaryButtonStyle}"
							Width="40"
							Height="35"
							FontSize="14"
							Margin="2"/>
					<Button Content="⏸"
							Command="{Binding PauseAudioCommand}"
							Style="{StaticResource SecondaryButtonStyle}"
							Width="40"
							Height="35"
							FontSize="14"
							Margin="2"/>
					<Button Content="⏹"
							Command="{Binding StopAudioCommand}"
							Style="{StaticResource SecondaryButtonStyle}"
							Width="40"
							Height="35"
							FontSize="14"
							Margin="2"/>
					<Button Content="💾"
							Command="{Binding SaveAudioCommand}"
							Style="{StaticResource SecondaryButtonStyle}"
							Width="40"
							Height="35"
							FontSize="14"
							Margin="2"/>
					<Button Content="🔄"
							Command="{Binding ReloadAudioCommand}"
							Style="{StaticResource SecondaryButtonStyle}"
							Width="40"
							Height="35"
							FontSize="14"
							Margin="2"/>
				</StackPanel>

				<!-- Progress Indicator -->
				<StackPanel HorizontalAlignment="Center"
							VerticalAlignment="Center"
							Visibility="{Binding IsSynthesizing, Converter={StaticResource BooleanToVisibilityConverter}}">
					<ProgressBar IsIndeterminate="True"
								 Height="4"
								 Width="300"
								 Background="{DynamicResource SecondaryDarkBrush}"
								 Foreground="{DynamicResource AccentRedBrush}"/>
					<TextBlock Text="{Binding SynthesisStatus}"
							   Foreground="{DynamicResource TextPrimaryBrush}"
							   HorizontalAlignment="Center"
							   Margin="0,12,0,0"/>
				</StackPanel>
			</Grid>
		</Border>

		<!-- Right Splitter -->
		<GridSplitter Grid.Column="1"
					  Width="4"
					  Background="{DynamicResource BorderBrush}"
					  HorizontalAlignment="Right"
					  VerticalAlignment="Stretch"/>

		<!-- Right Panel: Voice Library -->
		<Border Grid.Column="2"
				Background="{DynamicResource SecondaryDarkBrush}"
				CornerRadius="0,8,8,0"
				Margin="4,8,8,8">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="Auto"/>
				</Grid.RowDefinitions>

				<TextBlock Grid.Row="0"
						   Text="Voice Library"
						   Foreground="{DynamicResource TextPrimaryBrush}"
						   FontSize="14"
						   FontWeight="Bold"
						   Margin="12,12,12,8"/>

				<ListBox Grid.Row="1"
						 ItemsSource="{Binding VoiceLibrary}"
						 Background="Transparent"
						 BorderThickness="0"
						 Margin="12,0">
					<ListBox.ItemTemplate>
						<DataTemplate>
							<Border Background="{DynamicResource TertiaryDarkBrush}"
									CornerRadius="4"
									Margin="0,2"
									Padding="8">
								<StackPanel>
									<StackPanel Orientation="Horizontal">
										<TextBlock Text="{Binding VoiceIcon}"
												   FontSize="16"
												   VerticalAlignment="Center"
												   Margin="0,0,8,0"/>
										<StackPanel>
											<TextBlock Text="{Binding Name}"
													   Foreground="{DynamicResource TextPrimaryBrush}"
													   FontSize="12"
													   FontWeight="Bold"/>
											<TextBlock Text="{Binding Language}"
													   Foreground="{DynamicResource TextSecondaryBrush}"
													   FontSize="10"/>
										</StackPanel>
									</StackPanel>
									
									<StackPanel Orientation="Horizontal" Margin="0,4,0,0">
										<Button Content="▶"
												Command="{Binding DataContext.PreviewVoiceCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
												CommandParameter="{Binding}"
												Style="{StaticResource SecondaryButtonStyle}"
												Width="25"
												Height="20"
												FontSize="10"/>
										<Button Content="Select"
												Command="{Binding DataContext.SelectVoiceCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
												CommandParameter="{Binding}"
												Style="{StaticResource SecondaryButtonStyle}"
												Height="20"
												Width="45"
												FontSize="9"
												Margin="4,0,0,0"/>
									</StackPanel>

									<TextBlock Text="{Binding Description}"
											   Foreground="{DynamicResource TextSecondaryBrush}"
											   TextWrapping="Wrap"
											   FontSize="9"
											   Margin="0,4,0,0"/>
								</StackPanel>
							</Border>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>

				<!-- Quick Actions -->
				<StackPanel Grid.Row="2"
							Orientation="Horizontal"
							HorizontalAlignment="Center"
							Margin="12">
					<Button Content="Refresh Library"
							Command="{Binding RefreshLibraryCommand}"
							Style="{StaticResource SecondaryButtonStyle}"
							Height="30"
							Width="120"
							FontSize="10"/>
				</StackPanel>
			</Grid>
		</Border>
	</Grid>
</UserControl>