<UserControl x:Class="Lazarus.Desktop.Views.ChatView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 mc:Ignorable="d">

	<Grid Margin="12">
		<Grid.RowDefinitions>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- Messages -->
		<ScrollViewer x:Name="MessageScroller"
					  Grid.Row="0"
					  VerticalScrollBarVisibility="Auto"
					  Background="{StaticResource SecondaryDarkBrush}"
					  Padding="8">
			<ItemsControl ItemsSource="{Binding Messages}">
				<ItemsControl.ItemTemplate>
					<DataTemplate>
						<Border Margin="0,6"
								Padding="12,8"
								CornerRadius="12"
								Background="{Binding Role, Converter={StaticResource RoleToBrush}}"
								HorizontalAlignment="{Binding Role, Converter={StaticResource RoleToAlignment}}"
								MaxWidth="400">
							<StackPanel>
								<TextBlock Text="{Binding Role}"
										   Style="{StaticResource CaptionTextStyle}"
										   FontSize="10"
										   Opacity="0.7"
										   Margin="0,0,0,4"
										   FontWeight="Bold"/>
								<TextBlock Text="{Binding Text}"
										   TextWrapping="Wrap"
										   Foreground="{StaticResource TextPrimaryBrush}"
										   FontFamily="Consolas"/>
							</StackPanel>
						</Border>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>
		</ScrollViewer>

		<!-- Input -->
		<Border Grid.Row="1"
				Background="{StaticResource TertiaryDarkBrush}"
				CornerRadius="8"
				Padding="8"
				Margin="0,8,0,0">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>

				<TextBox x:Name="InputBox"
						 Grid.Column="0"
						 Text="{Binding Input, UpdateSourceTrigger=PropertyChanged}"
						 Style="{StaticResource DarkTextBoxMultilineStyle}"
						 MinHeight="36"
						 MaxHeight="120"
						 Background="Transparent"
						 BorderThickness="0"
						 VerticalAlignment="Center"
						 FontFamily="Consolas">
					<TextBox.InputBindings>
						<KeyBinding Command="{Binding SendCommand}"
									Key="Return" />
					</TextBox.InputBindings>
				</TextBox>

				<Button Grid.Column="1"
						Content="Send"
						Command="{Binding SendCommand}"
						Margin="5"
						Padding="10,5">
					<Button.Style>
						<Style TargetType="Button"
							   BasedOn="{StaticResource PrimaryButtonStyle}">
							<Style.Triggers>
								<Trigger Property="IsEnabled"
										 Value="False">
									<Setter Property="Background"
											Value="{StaticResource BorderBrush}"/>
									<Setter Property="Foreground"
											Value="{StaticResource TextDisabledBrush}"/>
								</Trigger>
							</Style.Triggers>
						</Style>
					</Button.Style>
				</Button>

			</Grid>
		</Border>
	</Grid>
</UserControl>