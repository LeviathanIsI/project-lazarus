<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:sys="clr-namespace:System;assembly=mscorlib">
    
    <!-- ENTHUSIAST TIER: "Informed Professional Density" -->
    
    <!-- Jobs View Template - Detailed job monitoring + queue management -->
    <DataTemplate x:Key="EnthusiastJobsViewModelTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="400" MinWidth="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="300" MinWidth="200"/>
            </Grid.ColumnDefinitions>
            
            <!-- Left Panel: Job Queue Management -->
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="8,0,0,8" Padding="16">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                        <TextBlock Text="📋" FontSize="20" Margin="0,0,8,0"/>
                        <TextBlock Text="Job Queue" Style="{DynamicResource HeadingMediumStyle}"/>
                    </StackPanel>
                    
                    <!-- Queue Controls -->
                    <Grid Margin="0,0,0,16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="0" Content="+ Add Job" 
                                Style="{DynamicResource AccentButtonStyle}"
                                Margin="0,0,8,0"/>
                        <Button Grid.Column="1" Content="⏸️" 
                                Style="{DynamicResource SecondaryButtonStyle}"
                                ToolTip="Pause Queue"/>
                    </Grid>
                    
                    <!-- Queued Jobs -->
                    <TextBlock Text="Queued (🕰️ Waiting)" 
                               Style="{DynamicResource BodyTextBoldStyle}"
                               Margin="0,0,0,8"/>
                    <ScrollViewer MaxHeight="200" Margin="0,0,0,16">
                        <ItemsControl ItemsSource="{Binding QueuedJobs}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                            CornerRadius="6" Padding="12" Margin="0,0,0,6"
                                            BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0">
                                                <TextBlock Text="{Binding Name}" 
                                                           Style="{DynamicResource BodyTextBoldStyle}"/>
                                                <TextBlock Text="{Binding JobType}" 
                                                           Style="{DynamicResource BodyTextSmallStyle}"
                                                           Foreground="{DynamicResource TextSecondaryBrush}"/>
                                            </StackPanel>
                                            
                                            <Button Grid.Column="1" Content="❌" 
                                                    Style="{DynamicResource MinimalButtonStyle}"
                                                    ToolTip="Cancel Job" FontSize="10"/>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                    
                    <!-- Active Jobs Summary -->
                    <TextBlock Text="Active (⏳ Running)" 
                               Style="{DynamicResource BodyTextBoldStyle}"
                               Margin="0,0,0,8"/>
                    <Border Background="{DynamicResource TertiaryDarkBrush}" 
                            CornerRadius="6" Padding="12"
                            BorderBrush="{DynamicResource AccentRedBrush}" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="{Binding ActiveJobs.Count, StringFormat='{}{0} jobs running'}" 
                                       Style="{DynamicResource BodyTextBoldStyle}"
                                       Foreground="{DynamicResource AccentRedBrush}"/>
                            <TextBlock Text="System load: Normal" 
                                       Style="{DynamicResource BodyTextSmallStyle}"
                                       Foreground="{DynamicResource TextSecondaryBrush}"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
            
            <!-- Center Panel: Active Job Details -->
            <Border Grid.Column="1" Background="{DynamicResource PrimaryDarkBrush}" Padding="16">
                <ScrollViewer>
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                            <TextBlock Text="⏳" FontSize="20" Margin="0,0,8,0"/>
                            <TextBlock Text="Active Jobs" Style="{DynamicResource HeadingMediumStyle}"/>
                        </StackPanel>
                        
                        <!-- Active Jobs List -->
                        <ItemsControl ItemsSource="{Binding ActiveJobs}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{DynamicResource SecondaryDarkBrush}" 
                                            CornerRadius="8" Padding="16" Margin="0,0,0,12"
                                            BorderBrush="{DynamicResource AccentRedBrush}" BorderThickness="1">
                                        <StackPanel>
                                            <!-- Job Header -->
                                            <Grid Margin="0,0,0,12">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="{Binding Name}" 
                                                               Style="{DynamicResource HeadingSmallStyle}"/>
                                                    <TextBlock Text="{Binding JobType}" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"
                                                               Foreground="{DynamicResource TextSecondaryBrush}"/>
                                                </StackPanel>
                                                
                                                <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                                                    <TextBlock Text="{Binding Progress, StringFormat='{}{0:P1}'}" 
                                                               Style="{DynamicResource HeadingSmallStyle}"
                                                               Foreground="{DynamicResource AccentRedBrush}" 
                                                               HorizontalAlignment="Right"/>
                                                    <TextBlock Text="{Binding Status}" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"
                                                               Foreground="{DynamicResource TextSecondaryBrush}"
                                                               HorizontalAlignment="Right"/>
                                                </StackPanel>
                                            </Grid>
                                            
                                            <!-- Progress Bar -->
                                            <ProgressBar Value="{Binding Progress}" Maximum="1" 
                                                         Height="8" Background="{DynamicResource TertiaryDarkBrush}"
                                                         Foreground="{DynamicResource AccentRedBrush}" Margin="0,0,0,8"/>
                                            
                                            <!-- Job Details -->
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="Started:" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"
                                                               Foreground="{DynamicResource TextMutedBrush}"/>
                                                    <TextBlock Text="{Binding StartTime, StringFormat='HH:mm:ss'}" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"/>
                                                </StackPanel>
                                                
                                                <StackPanel Grid.Column="1">
                                                    <TextBlock Text="ETA:" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"
                                                               Foreground="{DynamicResource TextMutedBrush}"/>
                                                    <TextBlock Text="{Binding EstimatedCompletion, StringFormat='HH:mm:ss'}" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"/>
                                                </StackPanel>
                                            </Grid>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        
                        <!-- Empty State -->
                        <Border Background="{DynamicResource SecondaryDarkBrush}" 
                                CornerRadius="8" Padding="32"
                                Visibility="{Binding HasActiveJobs, Converter={StaticResource InverseBoolToVisibility}}">
                            <StackPanel HorizontalAlignment="Center">
                                <TextBlock Text="⚙️" FontSize="48" HorizontalAlignment="Center" 
                                           Foreground="{DynamicResource TextMutedBrush}" Margin="0,0,0,16"/>
                                <TextBlock Text="Ready for Action" 
                                           Style="{DynamicResource HeadingMediumStyle}"
                                           HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                <TextBlock Text="Queue up your downloads, training, or embedding jobs" 
                                           Style="{DynamicResource BodyTextStyle}"
                                           Foreground="{DynamicResource TextSecondaryBrush}"
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>
            
            <!-- Right Panel: Job History & Stats -->
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="0,8,8,0" Padding="16">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                        <TextBlock Text="📊" FontSize="20" Margin="0,0,8,0"/>
                        <TextBlock Text="History &amp; Stats" Style="{DynamicResource HeadingMediumStyle}"/>
                    </StackPanel>
                    
                    <!-- Quick Stats -->
                    <Border Background="{DynamicResource TertiaryDarkBrush}" 
                            CornerRadius="6" Padding="12" Margin="0,0,0,16">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <StackPanel Grid.Row="0" Grid.Column="0">
                                <TextBlock Text="Today" Style="{DynamicResource BodyTextSmallStyle}"
                                           Foreground="{DynamicResource TextMutedBrush}"/>
                                <TextBlock Text="{Binding CompletedJobs.Count}" 
                                           Style="{DynamicResource HeadingSmallStyle}"
                                           Foreground="{DynamicResource SuccessBrush}"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="0" Grid.Column="1">
                                <TextBlock Text="Queue" Style="{DynamicResource BodyTextSmallStyle}"
                                           Foreground="{DynamicResource TextMutedBrush}"/>
                                <TextBlock Text="{Binding QueuedJobs.Count}" 
                                           Style="{DynamicResource HeadingSmallStyle}"
                                           Foreground="{DynamicResource AccentRedBrush}"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                    
                    <!-- Recent Completed Jobs -->
                    <TextBlock Text="Recently Completed" 
                               Style="{DynamicResource BodyTextBoldStyle}"
                               Margin="0,0,0,8"/>
                    <ScrollViewer MaxHeight="300">
                        <ItemsControl ItemsSource="{Binding CompletedJobs}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                            CornerRadius="6" Padding="12" Margin="0,0,0,6"
                                            Opacity="0.8">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0">
                                                <TextBlock Text="{Binding Name}" 
                                                           Style="{DynamicResource BodyTextStyle}"/>
                                                <TextBlock Text="{Binding CompletionTime, StringFormat='Finished at HH:mm'}" 
                                                           Style="{DynamicResource BodyTextSmallStyle}"
                                                           Foreground="{DynamicResource TextSecondaryBrush}"/>
                                            </StackPanel>
                                            
                                            <TextBlock Grid.Column="1" Text="✅" 
                                                       FontSize="14" 
                                                       Foreground="{DynamicResource SuccessBrush}"/>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- Datasets View Template - Dataset management + RAG source configuration -->
    <DataTemplate x:Key="EnthusiastDatasetsViewModelTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="400" MinWidth="350"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="300" MinWidth="250"/>
            </Grid.ColumnDefinitions>
            
            <!-- Left Panel: Dataset Library -->
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="8,0,0,8" Padding="16">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                        <TextBlock Text="📚" FontSize="20" Margin="0,0,8,0"/>
                        <TextBlock Text="Dataset Library" Style="{DynamicResource HeadingMediumStyle}"/>
                    </StackPanel>
                    
                    <!-- Dataset Controls -->
                    <Grid Margin="0,0,0,16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="0" Content="+ Import Dataset" 
                                Command="{Binding ImportDatasetCommand}"
                                Style="{DynamicResource AccentButtonStyle}"
                                Margin="0,0,8,0"/>
                        <Button Grid.Column="1" Content="🔄" 
                                Command="{Binding RefreshDatasetsCommand}"
                                Style="{DynamicResource SecondaryButtonStyle}"
                                ToolTip="Refresh Library"/>
                    </Grid>
                    
                    <!-- Dataset List -->
                    <ScrollViewer MaxHeight="300" Margin="0,0,0,16">
                        <ItemsControl ItemsSource="{Binding Datasets}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                            CornerRadius="6" Padding="12" Margin="0,0,0,8"
                                            BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            
                                            <!-- Dataset Header -->
                                            <Grid Grid.Row="0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <TextBlock Grid.Column="0" Text="{Binding TypeIcon}" 
                                                           FontSize="14" Margin="0,0,8,0" VerticalAlignment="Top"/>
                                                
                                                <StackPanel Grid.Column="1">
                                                    <TextBlock Text="{Binding Name}" 
                                                               Style="{DynamicResource BodyTextBoldStyle}"/>
                                                    <TextBlock Text="{Binding Description}" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"
                                                               Foreground="{DynamicResource TextSecondaryBrush}"/>
                                                </StackPanel>
                                                
                                                <TextBlock Grid.Column="2" Text="{Binding StatusText}" 
                                                           Style="{DynamicResource BodyTextSmallStyle}"
                                                           Foreground="{DynamicResource AccentRedBrush}"/>
                                            </Grid>
                                            
                                            <!-- Dataset Metrics -->
                                            <Grid Grid.Row="1" Margin="0,8,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="Documents" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"
                                                               Foreground="{DynamicResource TextMutedBrush}"/>
                                                    <TextBlock Text="{Binding DocumentCount}" 
                                                               Style="{DynamicResource BodyTextBoldStyle}"/>
                                                </StackPanel>
                                                
                                                <StackPanel Grid.Column="1">
                                                    <TextBlock Text="Size" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"
                                                               Foreground="{DynamicResource TextMutedBrush}"/>
                                                    <TextBlock Text="{Binding SizeText}" 
                                                               Style="{DynamicResource BodyTextBoldStyle}"/>
                                                </StackPanel>
                                            </Grid>
                                            
                                            <!-- Progress for Processing -->
                                            <ProgressBar Grid.Row="2" 
                                                         Visibility="{Binding IsProcessing, Converter={StaticResource BoolToVisibility}}"
                                                         IsIndeterminate="True" Height="4" Margin="0,8,0,0"
                                                         Background="{DynamicResource PrimaryDarkBrush}"
                                                         Foreground="{DynamicResource AccentRedBrush}"/>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                    
                    <!-- Quick Stats -->
                    <Border Background="{DynamicResource TertiaryDarkBrush}" 
                            CornerRadius="6" Padding="12">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Datasets" 
                                           Style="{DynamicResource BodyTextSmallStyle}"
                                           Foreground="{DynamicResource TextMutedBrush}"/>
                                <TextBlock Text="{Binding Datasets.Count}" 
                                           Style="{DynamicResource HeadingSmallStyle}"
                                           Foreground="{DynamicResource AccentRedBrush}"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Sources" 
                                           Style="{DynamicResource BodyTextSmallStyle}"
                                           Foreground="{DynamicResource TextMutedBrush}"/>
                                <TextBlock Text="{Binding RagSources.Count}" 
                                           Style="{DynamicResource HeadingSmallStyle}"
                                           Foreground="{DynamicResource AccentRedBrush}"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </StackPanel>
            </Border>
            
            <!-- Center Panel: RAG Sources & Configuration -->
            <Border Grid.Column="1" Background="{DynamicResource PrimaryDarkBrush}" Padding="16">
                <ScrollViewer>
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                            <TextBlock Text="📂" FontSize="20" Margin="0,0,8,0"/>
                            <TextBlock Text="Data Sources" Style="{DynamicResource HeadingMediumStyle}"/>
                        </StackPanel>
                        
                        <!-- Source Management -->
                        <Border Background="{DynamicResource SecondaryDarkBrush}" 
                                CornerRadius="8" Padding="16" Margin="0,0,0,16">
                            <StackPanel>
                                <!-- Add Source Controls -->
                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <TextBlock Grid.Column="0" Text="Manage Document Sources" 
                                               Style="{DynamicResource BodyTextBoldStyle}"/>
                                    <Button Grid.Column="1" Content="+ Folder" 
                                            Command="{Binding AddFolderSourceCommand}"
                                            Style="{DynamicResource SecondaryButtonStyle}"
                                            Margin="0,0,8,0"/>
                                    <Button Grid.Column="2" Content="+ Files" 
                                            Command="{Binding AddFileSourceCommand}"
                                            Style="{DynamicResource SecondaryButtonStyle}"/>
                                </Grid>
                                
                                <!-- Source List -->
                                <ItemsControl ItemsSource="{Binding RagSources}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                                    CornerRadius="6" Padding="12" Margin="0,0,0,8">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    
                                                    <TextBlock Grid.Column="0" Text="{Binding TypeIcon}" 
                                                               FontSize="16" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                                    
                                                    <StackPanel Grid.Column="1">
                                                        <TextBlock Text="{Binding Name}" 
                                                                   Style="{DynamicResource BodyTextBoldStyle}"/>
                                                        <TextBlock Text="{Binding Path}" 
                                                                   Style="{DynamicResource BodyTextSmallStyle}"
                                                                   Foreground="{DynamicResource TextSecondaryBrush}"/>
                                                        <TextBlock Text="{Binding FileCount, StringFormat='{}{0} files'}" 
                                                                   Style="{DynamicResource BodyTextSmallStyle}"
                                                                   Foreground="{DynamicResource TextMutedBrush}"/>
                                                    </StackPanel>
                                                    
                                                    <Button Grid.Column="2" Content="🔄" 
                                                            Style="{DynamicResource MinimalButtonStyle}"
                                                            ToolTip="Scan Source" Margin="0,0,4,0"/>
                                                    <Button Grid.Column="3" Content="❌" 
                                                            Style="{DynamicResource MinimalButtonStyle}"
                                                            ToolTip="Remove Source"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                                
                                <!-- Empty Sources State -->
                                <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                        CornerRadius="6" Padding="24"
                                        Visibility="{Binding HasRagSources, Converter={StaticResource InverseBoolToVisibility}}">
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="📂" FontSize="32" HorizontalAlignment="Center" 
                                                   Foreground="{DynamicResource TextMutedBrush}" Margin="0,0,0,8"/>
                                        <TextBlock Text="No Sources Added" 
                                                   Style="{DynamicResource HeadingSmallStyle}"
                                                   HorizontalAlignment="Center" Margin="0,0,0,4"/>
                                        <TextBlock Text="Add folders or files to create searchable sources" 
                                                   Style="{DynamicResource BodyTextStyle}"
                                                   Foreground="{DynamicResource TextSecondaryBrush}"
                                                   HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Border>
                        
                        <!-- Processing Queue -->
                        <Border Background="{DynamicResource SecondaryDarkBrush}" 
                                CornerRadius="8" Padding="16"
                                Visibility="{Binding HasProcessingItems, Converter={StaticResource BoolToVisibility}}">
                            <StackPanel>
                                <TextBlock Text="⏳ Processing Queue" 
                                           Style="{DynamicResource BodyTextBoldStyle}"
                                           Margin="0,0,0,8"/>
                                <TextBlock Text="Indexing documents for search..." 
                                           Style="{DynamicResource BodyTextStyle}"
                                           Foreground="{DynamicResource TextSecondaryBrush}"/>
                                <ProgressBar IsIndeterminate="True" Height="6" 
                                             Background="{DynamicResource TertiaryDarkBrush}"
                                             Foreground="{DynamicResource AccentRedBrush}" Margin="0,8,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>
            
            <!-- Right Panel: Index Status & Configuration -->
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="0,8,8,0" Padding="16">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                        <TextBlock Text="🧠" FontSize="20" Margin="0,0,8,0"/>
                        <TextBlock Text="Indexes" Style="{DynamicResource HeadingMediumStyle}"/>
                    </StackPanel>
                    
                    <!-- Embedding Configuration -->
                    <Border Background="{DynamicResource TertiaryDarkBrush}" 
                            CornerRadius="6" Padding="12" Margin="0,0,0,16">
                        <StackPanel>
                            <TextBlock Text="Embedding Model" 
                                       Style="{DynamicResource BodyTextBoldStyle}"
                                       Margin="0,0,0,8"/>
                            <ComboBox SelectedValue="sentence-transformers/all-MiniLM-L6-v2"
                                      Style="{DynamicResource CompactComboBoxStyle}">
                                <ComboBoxItem>sentence-transformers/all-MiniLM-L6-v2</ComboBoxItem>
                                <ComboBoxItem>text-embedding-ada-002</ComboBoxItem>
                                <ComboBoxItem>intfloat/e5-base-v2</ComboBoxItem>
                            </ComboBox>
                        </StackPanel>
                    </Border>
                    
                    <!-- Active Indexes -->
                    <TextBlock Text="Active Indexes" 
                               Style="{DynamicResource BodyTextBoldStyle}"
                               Margin="0,0,0,8"/>
                    <ScrollViewer MaxHeight="200" Margin="0,0,0,16">
                        <ItemsControl ItemsSource="{Binding EmbeddingIndexes}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                            CornerRadius="6" Padding="12" Margin="0,0,0,6">
                                        <StackPanel>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <TextBlock Grid.Column="0" Text="{Binding Name}" 
                                                           Style="{DynamicResource BodyTextBoldStyle}"/>
                                                <TextBlock Grid.Column="1" Text="{Binding StatusText}" 
                                                           Style="{DynamicResource BodyTextSmallStyle}"
                                                           Foreground="{DynamicResource SuccessBrush}"/>
                                            </Grid>
                                            
                                            <Grid Margin="0,4,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="Vectors" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"
                                                               Foreground="{DynamicResource TextMutedBrush}"/>
                                                    <TextBlock Text="{Binding VectorCount}" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"/>
                                                </StackPanel>
                                                
                                                <StackPanel Grid.Column="1">
                                                    <TextBlock Text="Size" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"
                                                               Foreground="{DynamicResource TextMutedBrush}"/>
                                                    <TextBlock Text="{Binding SizeText}" 
                                                               Style="{DynamicResource BodyTextSmallStyle}"/>
                                                </StackPanel>
                                            </Grid>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                    
                    <!-- Index Actions -->
                    <StackPanel>
                        <Button Content="+ Create Index" 
                                Command="{Binding CreateEmbeddingIndexCommand}"
                                Style="{DynamicResource AccentButtonStyle}"
                                Margin="0,0,0,8"/>
                        <Button Content="Rebuild All" 
                                Command="{Binding RebuildIndexesCommand}"
                                Style="{DynamicResource SecondaryButtonStyle}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- Model Selection Template - Professional Analysis -->
    <DataTemplate x:Key="ModelSelectionTemplate">
        <Border Margin="0,6" Padding="14" 
                Background="{DynamicResource SecondaryDarkBrush}"
                CornerRadius="6" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Model Info -->
                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="{Binding Name}" 
                                   Style="{DynamicResource HeadingSmallStyle}"
                                   Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <Border Grid.Column="1" Background="{DynamicResource AccentPurpleBrush}"
                                Padding="6,2" CornerRadius="10">
                            <TextBlock Text="{Binding ModelType}" 
                                       Style="{DynamicResource CaptionTextStyle}"
                                       Foreground="{DynamicResource TextPrimaryBrush}" FontSize="9"/>
                        </Border>
                    </Grid>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                        <TextBlock Text="Parameters: " 
                                   Style="{DynamicResource CaptionTextStyle}"
                                   Foreground="{DynamicResource TextMutedBrush}"/>
                        <TextBlock Text="{Binding ParameterCount}" 
                                   Style="{DynamicResource CaptionTextStyle}"
                                   Foreground="{DynamicResource AccentRedBrush}" FontWeight="SemiBold"/>
                        <TextBlock Text=" • Context: " 
                                   Style="{DynamicResource CaptionTextStyle}"
                                   Foreground="{DynamicResource TextMutedBrush}" Margin="8,0,0,0"/>
                        <TextBlock Text="{Binding ContextLength}" 
                                   Style="{DynamicResource CaptionTextStyle}"
                                   Foreground="{DynamicResource AccentRedBrush}" FontWeight="SemiBold"/>
                    </StackPanel>
                    
                    <TextBlock Text="{Binding Capabilities}" 
                               Style="{DynamicResource CaptionTextStyle}"
                               Foreground="{DynamicResource TextSecondaryBrush}"/>
                </StackPanel>
                
                <!-- Performance Metrics -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="12,0">
                    <TextBlock Text="Performance" 
                               Style="{DynamicResource CaptionTextStyle}"
                               FontWeight="SemiBold" HorizontalAlignment="Center"
                               Foreground="{DynamicResource TextMutedBrush}" FontSize="10"/>
                    <ProgressBar Value="{Binding PerformanceScore}" Maximum="100" 
                                 Width="60" Height="4" Margin="0,4,0,2"
                                 Background="{DynamicResource TertiaryDarkBrush}"
                                 Foreground="{DynamicResource AccentGreenBrush}"/>
                    <TextBlock Text="{Binding PerformanceScore, StringFormat={}{0:F0}%}" 
                               Style="{DynamicResource CodeTextStyle}"
                               HorizontalAlignment="Center" FontSize="10"
                               Foreground="{DynamicResource AccentGreenBrush}"/>
                </StackPanel>
                
                <!-- Action Button -->
                <Button Grid.Column="2" Content="Select" 
                        Style="{DynamicResource PrimaryButtonStyle}"
                        Padding="14,6" VerticalAlignment="Center"
                        Command="{Binding SelectCommand}"/>
            </Grid>
        </Border>
    </DataTemplate>
    
    <!-- Parameter Control Template - Professional Controls -->
    <DataTemplate x:Key="ParameterControlTemplate">
        <GroupBox Header="{Binding Name}" Style="{DynamicResource ParameterGroupStyle}"
                  Margin="0,6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Control Area -->
                <StackPanel Grid.Column="0" Margin="0,0,12,0">
                    <TextBlock Text="{Binding Description}" 
                               Style="{DynamicResource CaptionTextStyle}"
                               Foreground="{DynamicResource TextSecondaryBrush}"
                               TextWrapping="Wrap" Margin="0,0,0,8"/>
                    
                    <Slider Value="{Binding Value}" 
                            Minimum="{Binding Minimum}" 
                            Maximum="{Binding Maximum}"
                            TickFrequency="{Binding TickFrequency}"
                            TickPlacement="BottomRight"
                            IsSnapToTickEnabled="True"/>
                    
                    <!-- Range Labels -->
                    <Grid Margin="0,4,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="{Binding Minimum, StringFormat=F2}" 
                                   Style="{DynamicResource CodeTextStyle}" FontSize="9"
                                   Foreground="{DynamicResource TextMutedBrush}"/>
                        <TextBlock Grid.Column="1" Text="{Binding RecommendedValue, StringFormat={}Rec: {0:F2}}" 
                                   Style="{DynamicResource CodeTextStyle}" FontSize="9"
                                   HorizontalAlignment="Center"
                                   Foreground="{DynamicResource AccentPurpleBrush}"/>
                        <TextBlock Grid.Column="2" Text="{Binding Maximum, StringFormat=F2}" 
                                   Style="{DynamicResource CodeTextStyle}" FontSize="9"
                                   HorizontalAlignment="Right"
                                   Foreground="{DynamicResource TextMutedBrush}"/>
                    </Grid>
                </StackPanel>
                
                <!-- Value Display -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBox Text="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                             Style="{DynamicResource DarkTextBoxStyle}"
                             Width="80" FontFamily="Consolas"
                             HorizontalContentAlignment="Center"/>
                    <TextBlock Text="Current" 
                               Style="{DynamicResource CaptionTextStyle}"
                               HorizontalAlignment="Center" FontSize="9"
                               Foreground="{DynamicResource TextMutedBrush}" Margin="0,2,0,0"/>
                </StackPanel>
            </Grid>
        </GroupBox>
    </DataTemplate>
    
    <!-- Status Display Template - Professional Metrics -->
    <DataTemplate x:Key="StatusDisplayTemplate">
        <Border Padding="12" 
                Background="{DynamicResource SecondaryDarkBrush}"
                CornerRadius="4" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Status Indicator -->
                <Border Grid.Column="0" Width="24" Height="24" 
                        Background="{DynamicResource AccentGreenBrush}"
                        CornerRadius="12" Margin="0,0,12,0" VerticalAlignment="Center">
                    <TextBlock Text="{Binding StatusIcon}" FontSize="12" 
                               HorizontalAlignment="Center" VerticalAlignment="Center"
                               Foreground="{DynamicResource TextPrimaryBrush}"/>
                </Border>
                
                <!-- Status Info -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock Text="{Binding Status}" 
                               Style="{DynamicResource BodyTextStyle}"
                               FontWeight="SemiBold" 
                               Foreground="{DynamicResource TextPrimaryBrush}"/>
                    <TextBlock Text="{Binding Details}" 
                               Style="{DynamicResource CaptionTextStyle}"
                               Foreground="{DynamicResource TextSecondaryBrush}"/>
                    
                    <!-- Progress with Percentage -->
                    <Grid Margin="0,4,0,0" Visibility="{Binding ShowProgress, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ProgressBar Value="{Binding Progress}" Maximum="100" 
                                     Height="6" Background="{DynamicResource TertiaryDarkBrush}"
                                     Foreground="{DynamicResource AccentPurpleBrush}"/>
                        <TextBlock Text="{Binding Progress, StringFormat={}{0:F1}%}" 
                                   Style="{DynamicResource CaptionTextStyle}"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                   FontSize="9" Foreground="{DynamicResource TextPrimaryBrush}"/>
                    </Grid>
                </StackPanel>
                
                <!-- Timestamp -->
                <TextBlock Grid.Column="2" Text="{Binding Timestamp, StringFormat=HH:mm:ss}" 
                           Style="{DynamicResource CodeTextStyle}"
                           VerticalAlignment="Center" FontSize="10"
                           Foreground="{DynamicResource TextMutedBrush}"/>
            </Grid>
        </Border>
    </DataTemplate>
    
    <!-- Error Display Template - Professional Troubleshooting -->
    <DataTemplate x:Key="ErrorDisplayTemplate">
        <Border Padding="12" 
                Background="{DynamicResource ErrorBackgroundBrush}"
                CornerRadius="4" BorderBrush="{DynamicResource ErrorBrush}" BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Error Header -->
                <Grid Grid.Row="0" Margin="0,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Column="0" Text="⚠" FontSize="16" 
                               Foreground="{DynamicResource ErrorBrush}"
                               VerticalAlignment="Center" Margin="0,0,8,0"/>
                    
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Text="{Binding ErrorType}" 
                                   Style="{DynamicResource BodyTextStyle}"
                                   FontWeight="SemiBold" 
                                   Foreground="{DynamicResource ErrorBrush}"/>
                        <TextBlock Text="{Binding Component}" 
                                   Style="{DynamicResource CaptionTextStyle}"
                                   Foreground="{DynamicResource TextMutedBrush}"/>
                    </StackPanel>
                    
                    <TextBlock Grid.Column="2" Text="{Binding ErrorCode}" 
                               Style="{DynamicResource CodeTextStyle}"
                               Foreground="{DynamicResource TextMutedBrush}" FontSize="10"
                               VerticalAlignment="Center"/>
                </Grid>
                
                <!-- Error Details -->
                <TextBlock Grid.Row="1" Text="{Binding Message}" 
                           Style="{DynamicResource CaptionTextStyle}"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           TextWrapping="Wrap" Margin="0,0,0,8"/>
                
                <!-- Actions -->
                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Retry" 
                            Style="{DynamicResource PrimaryButtonStyle}"
                            Padding="10,4" Margin="0,0,6,0"
                            Command="{Binding RetryCommand}"/>
                    <Button Content="Details" 
                            Style="{DynamicResource GhostButtonStyle}"
                            Padding="10,4"
                            Command="{Binding ShowDetailsCommand}"/>
                </StackPanel>
            </Grid>
        </Border>
    </DataTemplate>
    
    <!-- ENHANCED ENTHUSIAST ChatMessageTemplate - Collapsible Panels + Contextual Guidance -->
    <DataTemplate x:Key="ChatMessageTemplate">
        <Border Margin="10,6" 
                Padding="18" 
                MaxWidth="650"
                Background="{DynamicResource SecondaryDarkBrush}"
                CornerRadius="12"
                BorderBrush="{DynamicResource BorderBrush}" 
                BorderThickness="1">
            
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Professional Message Header -->
                <Grid Grid.Row="0" Margin="0,0,0,12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Enhanced Role Badge with Status -->
                    <Border Grid.Column="0"
                            Background="{DynamicResource AccentRedBrush}"
                            Padding="10,5"
                            CornerRadius="12"
                            Margin="0,0,12,0">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Role}" 
                                       Style="{DynamicResource CaptionTextStyle}"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource TextPrimaryBrush}"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="●" 
                                       Foreground="{DynamicResource SuccessBrush}"
                                       FontSize="8"
                                       VerticalAlignment="Center"
                                       Margin="6,0,0,0"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Context Actions -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="0,0,8,0">
                        <Button Content="📋" 
                                ToolTip="Copy message"
                                Style="{DynamicResource GhostButtonStyle}"
                                Padding="6"
                                FontSize="12"
                                Command="{Binding CopyCommand}"/>
                        <Button Content="🔄" 
                                ToolTip="Regenerate response"
                                Style="{DynamicResource GhostButtonStyle}"
                                Padding="6"
                                FontSize="12"
                                Command="{Binding RegenerateCommand}"/>
                    </StackPanel>
                    
                    <!-- Timestamp with Status -->
                    <TextBlock Grid.Column="3" 
                               Text="{Binding Timestamp, StringFormat=HH:mm:ss}" 
                               Style="{DynamicResource CodeTextStyle}"
                               Foreground="{DynamicResource TextMutedBrush}" 
                               FontSize="11"
                               VerticalAlignment="Center"/>
                </Grid>
                
                <!-- Message Content with Enhanced Readability -->
                <ScrollViewer Grid.Row="1" 
                              MaxHeight="300"
                              VerticalScrollBarVisibility="Auto"
                              Margin="0,0,0,8">
                    <TextBlock Text="{Binding Text}" 
                               Style="{DynamicResource BodyTextStyle}"
                               Foreground="{DynamicResource TextPrimaryBrush}"
                               TextWrapping="Wrap"
                               LineHeight="24"
                               FontSize="13"/>
                </ScrollViewer>
                
                <!-- Collapsible Metadata Panel -->
                <Expander Grid.Row="2" 
                          Header="Message Details" 
                          IsExpanded="False"
                          Margin="0,4,0,0">
                    <Expander.HeaderTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding}" 
                                           Style="{DynamicResource CaptionTextStyle}"
                                           Foreground="{DynamicResource TextMutedBrush}"/>
                                <TextBlock Text=" (Click to expand)" 
                                           Style="{DynamicResource CaptionTextStyle}"
                                           Foreground="{DynamicResource TextMutedBrush}"
                                           FontStyle="Italic"/>
                            </StackPanel>
                        </DataTemplate>
                    </Expander.HeaderTemplate>
                    
                    <Border Background="{DynamicResource TertiaryDarkBrush}" 
                            Padding="12" 
                            CornerRadius="6"
                            Margin="0,4,0,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Message Metadata -->
                            <StackPanel Grid.Column="0" Margin="0,0,8,0">
                                <TextBlock Text="Message Info" 
                                           Style="{DynamicResource CaptionTextStyle}"
                                           FontWeight="SemiBold"
                                           Margin="0,0,0,4"/>
                                <TextBlock Text="{Binding Text.Length, StringFormat={}Length: {0} chars}" 
                                           Style="{DynamicResource CodeTextStyle}"
                                           FontSize="11"
                                           Margin="0,0,0,2"/>
                                <TextBlock Text="{Binding WordCount, StringFormat={}Words: {0}}" 
                                           Style="{DynamicResource CodeTextStyle}"
                                           FontSize="11"
                                           Margin="0,0,0,2"/>
                            </StackPanel>
                            
                            <!-- Conversation Context -->
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Context" 
                                           Style="{DynamicResource CaptionTextStyle}"
                                           FontWeight="SemiBold"
                                           Margin="0,0,0,4"/>
                                <TextBlock Text="{Binding MessageIndex, StringFormat={}Message #{0}}" 
                                           Style="{DynamicResource CodeTextStyle}"
                                           FontSize="11"
                                           Margin="0,0,0,2"/>
                                <TextBlock Text="{Binding ConversationLength, StringFormat={}Total: {0} messages}" 
                                           Style="{DynamicResource CodeTextStyle}"
                                           FontSize="11"
                                           Margin="0,0,0,2"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Expander>
                
                <!-- Contextual Guidance Footer -->
                <Border Grid.Row="3" 
                        Background="{DynamicResource AccentRedBrush}"
                        Padding="8,4"
                        CornerRadius="4"
                        Margin="0,6,0,0"
                        Opacity="0.8">
                    <TextBlock Text="💡 Tip: Use the details panel to track conversation flow and message statistics" 
                               Style="{DynamicResource CaptionTextStyle}"
                               Foreground="{DynamicResource TextPrimaryBrush}"
                               FontSize="10"
                               TextWrapping="Wrap"/>
                </Border>
            </Grid>
        </Border>
    </DataTemplate>
    
    <!-- FUNCTIONAL ENTHUSIAST LoRACardTemplate - Professional Density -->
    <DataTemplate x:Key="LoRACardTemplate">
        <Border Margin="0,0,12,12"
                MinWidth="280" MaxWidth="320"
                Padding="16"
                Background="{DynamicResource SecondaryDarkBrush}"
                CornerRadius="8"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="1">
            
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- LoRA Name and Category -->
                <Grid Grid.Row="0" Margin="0,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" 
                               Text="{Binding Name}"
                               Style="{DynamicResource HeadingSmallStyle}"
                               Foreground="{DynamicResource TextPrimaryBrush}"/>
                    <Border Grid.Column="1" 
                            Background="{DynamicResource AccentPurpleBrush}"
                            Padding="6,2" 
                            CornerRadius="10">
                        <TextBlock Text="{Binding Category}" 
                                   Style="{DynamicResource CaptionTextStyle}"
                                   Foreground="{DynamicResource AccentTextBrush}"/>
                    </Border>
                </Grid>
                
                <!-- Description -->
                <TextBlock Grid.Row="1" 
                           Text="{Binding Description}"
                           Style="{DynamicResource BodyTextStyle}"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           TextWrapping="Wrap"
                           MaxHeight="50"
                           Margin="0,0,0,8"/>
                           
                <!-- Metadata Row -->
                <Grid Grid.Row="2" Margin="0,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" 
                               Text="{Binding BaseModel}" 
                               Style="{DynamicResource CaptionTextStyle}"
                               Foreground="{DynamicResource TextMutedBrush}"/>
                    <TextBlock Grid.Column="1" 
                               Text="{Binding FileSize, StringFormat={}{0:F1} MB}" 
                               Style="{DynamicResource CaptionTextStyle}"
                               Foreground="{DynamicResource TextMutedBrush}"/>
                </Grid>
                
                <!-- Weight Control Row -->
                <Grid Grid.Row="3" Margin="0,0,0,12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" 
                               Text="Weight:" 
                               Style="{DynamicResource CaptionTextStyle}"
                               VerticalAlignment="Center"
                               Margin="0,0,8,0"/>
                    <Slider Grid.Column="1" 
                            Minimum="0.0" 
                            Maximum="2.0" 
                            Value="{Binding RecommendedWeight}" 
                            TickFrequency="0.1"
                            IsSnapToTickEnabled="True"/>
                    <TextBox Grid.Column="2" 
                             Text="{Binding RecommendedWeight, StringFormat={}{0:F1}}"
                             Width="40"
                             Style="{DynamicResource CompactTextBoxStyle}"/>
                </Grid>
                
                <!-- Apply Button -->
                <Button Grid.Row="4" 
                        Content="Apply LoRA"
                        Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext.ApplyLoRACommand}"
                        CommandParameter="{Binding}"
                        Style="{DynamicResource AccentButtonStyle}"
                        HorizontalAlignment="Stretch"/>
            </Grid>
        </Border>
    </DataTemplate>

    <!-- Chat Status Template - Professional Context -->
    <DataTemplate x:Key="ChatStatusTemplate">
        <Border Padding="32" 
                Background="{DynamicResource PrimaryDarkBrush}"
                CornerRadius="8"
                BorderBrush="{DynamicResource AccentPurpleBrush}"
                BorderThickness="1">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" MaxWidth="600">
                <TextBlock Text="⚡ Power Up Your AI Workspace"
                           Style="{DynamicResource HeadingSmallStyle}"
                           FontSize="22" FontWeight="Bold"
                           HorizontalAlignment="Center"
                           Foreground="{DynamicResource AccentPurpleBrush}"
                           Margin="0,0,0,16"/>
                           
                <TextBlock Text="Select a foundation model to begin advanced AI operations. Choose from GGUF, SafeTensors, or connect to remote instances."
                           Style="{DynamicResource BodyTextStyle}"
                           FontSize="14" TextWrapping="Wrap"
                           HorizontalAlignment="Center"
                           TextAlignment="Center"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           Margin="0,0,0,24"/>
                           
                <!-- Professional Action Grid -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Local Model Setup -->
                    <Border Grid.Column="0" 
                            Background="{DynamicResource TertiaryDarkBrush}" 
                            CornerRadius="6" 
                            Padding="20"
                            Margin="0,0,8,0">
                        <StackPanel>
                            <TextBlock Text="🔥 Local Models" 
                                       FontSize="16" FontWeight="SemiBold"
                                       Foreground="{DynamicResource AccentRedBrush}"
                                       HorizontalAlignment="Center"
                                       Margin="0,0,0,8"/>
                            <TextBlock Text="Load GGUF/SafeTensor models from your collection"
                                       Style="{DynamicResource CaptionTextStyle}"
                                       TextAlignment="Center"
                                       TextWrapping="Wrap"
                                       Margin="0,0,0,12"/>
                            <Border Background="{DynamicResource AccentRedBrush}" 
                                    CornerRadius="4">
                                <Button Content="Browse Models" 
                                        Background="Transparent"
                                        Foreground="White"
                                        BorderThickness="0"
                                        Padding="16,8"/>
                            </Border>
                        </StackPanel>
                    </Border>
                    
                    <!-- Remote Connection -->
                    <Border Grid.Column="1" 
                            Background="{DynamicResource TertiaryDarkBrush}" 
                            CornerRadius="6" 
                            Padding="20"
                            Margin="8,0,0,0">
                        <StackPanel>
                            <TextBlock Text="🌐 Remote API" 
                                       FontSize="16" FontWeight="SemiBold"
                                       Foreground="{DynamicResource AccentPurpleBrush}"
                                       HorizontalAlignment="Center"
                                       Margin="0,0,0,8"/>
                            <TextBlock Text="Connect to OpenAI, Anthropic, or custom endpoints"
                                       Style="{DynamicResource CaptionTextStyle}"
                                       TextAlignment="Center"
                                       TextWrapping="Wrap"
                                       Margin="0,0,0,12"/>
                            <Border Background="{DynamicResource AccentPurpleBrush}" 
                                    CornerRadius="4">
                                <Button Content="Configure API" 
                                        Background="Transparent"
                                        Foreground="White"
                                        BorderThickness="0"
                                        Padding="16,8"/>
                            </Border>
                        </StackPanel>
                    </Border>
                </Grid>
                
                <!-- Professional Status -->
                <TextBlock Text="Ready for production-grade AI workflows"
                           FontSize="12"
                           FontStyle="Italic"
                           Foreground="{DynamicResource TextMutedBrush}"
                           HorizontalAlignment="Center"
                           Margin="0,20,0,0"/>
            </StackPanel>
        </Border>
    </DataTemplate>

    <!-- Float Parameter Template - Professional Balance -->
    <DataTemplate x:Key="FloatParameterTemplate">
        <Border Margin="0,6" Padding="12" 
                Background="{DynamicResource TertiaryDarkBrush}"
                CornerRadius="4" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Parameter Header -->
                <Grid Grid.Row="0" Margin="0,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="{Binding Name}" 
                                   Style="{DynamicResource BodyTextStyle}"
                                   FontWeight="SemiBold" FontSize="13"/>
                        <TextBlock Text="{Binding RecommendedRange}" 
                                   Style="{DynamicResource CaptionTextStyle}"
                                   FontSize="10" Opacity="0.8"/>
                    </StackPanel>
                    
                    <TextBlock Grid.Column="1" Text="{Binding Value, StringFormat=F3}" 
                               Style="{DynamicResource BodyTextStyle}"
                               FontFamily="Consolas" FontSize="11"
                               Foreground="{DynamicResource AccentRedBrush}"
                               VerticalAlignment="Center"/>
                </Grid>
                
                <!-- Control -->
                <Slider Grid.Row="1"
                        Value="{Binding Value}" 
                        Minimum="{Binding Minimum}" 
                        Maximum="{Binding Maximum}"
                        TickFrequency="{Binding TickFrequency}"
                        Height="24"/>
            </Grid>
        </Border>
    </DataTemplate>

    <!-- Integer Parameter Template - Professional -->
    <DataTemplate x:Key="IntParameterTemplate">
        <Border Margin="0,6" Padding="12" 
                Background="{DynamicResource TertiaryDarkBrush}"
                CornerRadius="4" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" Text="{Binding Name}" 
                           Style="{DynamicResource BodyTextStyle}"
                           FontWeight="SemiBold" FontSize="13" VerticalAlignment="Center"/>
                           
                <Slider Grid.Column="1"
                        Value="{Binding Value}" 
                        Minimum="{Binding Minimum}" 
                        Maximum="{Binding Maximum}"
                        IsSnapToTickEnabled="True"
                        TickFrequency="1"
                        Width="120" Height="24"
                        VerticalAlignment="Center" Margin="12,0"/>
                        
                <TextBox Grid.Column="2" 
                         Text="{Binding Value, UpdateSourceTrigger=PropertyChanged}" 
                         Style="{DynamicResource CodeTextBoxStyle}"
                         FontSize="10" Padding="4" TextAlignment="Right"/>
            </Grid>
        </Border>
    </DataTemplate>

    <!-- Boolean Parameter Template - Professional Toggle -->
    <DataTemplate x:Key="BoolParameterTemplate">
        <Border Margin="0,6" Padding="12" 
                Background="{DynamicResource TertiaryDarkBrush}"
                CornerRadius="4" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock Text="{Binding Name}" 
                               Style="{DynamicResource BodyTextStyle}"
                               FontWeight="SemiBold" FontSize="13"/>
                    <TextBlock Text="{Binding ImpactDescription}" 
                               Style="{DynamicResource CaptionTextStyle}"
                               FontSize="10" TextWrapping="Wrap"
                               Margin="0,2,0,0"/>
                </StackPanel>
                
                <CheckBox Grid.Column="1"
                          IsChecked="{Binding Value}"
                          VerticalAlignment="Center"
                          Margin="12,0,0,0"/>
            </Grid>
        </Border>
    </DataTemplate>

    <!-- Generation Progress Template - Professional Status -->
    <DataTemplate x:Key="GenerationProgressTemplate">
        <Border Padding="16" 
                Background="{DynamicResource SecondaryDarkBrush}"
                CornerRadius="6" BorderBrush="{DynamicResource AccentPurpleBrush}" BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" Text="⚙️" FontSize="16" 
                           VerticalAlignment="Center" Margin="0,0,12,0"/>
                           
                <StackPanel Grid.Column="1">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="{Binding OperationType}" 
                                   Style="{DynamicResource BodyTextStyle}"
                                   FontWeight="SemiBold" FontSize="14"/>
                        <TextBlock Grid.Column="1" Text="{Binding Progress, StringFormat={}{0:F0}%}" 
                                   Style="{DynamicResource BodyTextStyle}"
                                   FontSize="12" Foreground="{DynamicResource AccentGreenBrush}"/>
                    </Grid>
                    
                    <ProgressBar Value="{Binding Progress}" 
                                 Height="6" 
                                 Background="{DynamicResource TertiaryDarkBrush}"
                                 Foreground="{DynamicResource AccentPurpleBrush}"
                                 Margin="0,4,0,0"/>
                </StackPanel>
                
                <TextBlock Grid.Column="2" Text="{Binding EstimatedTimeRemaining}" 
                           Style="{DynamicResource CaptionTextStyle}"
                           FontSize="10" VerticalAlignment="Center"
                           Margin="12,0,0,0"/>
            </Grid>
        </Border>
    </DataTemplate>

    <!-- Voice Synthesis Templates - Enthusiast Professional -->
    <DataTemplate x:Key="TTSConfigurationTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="340"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="300"/>
            </Grid.ColumnDefinitions>
            
            <!-- Voice Configuration Panel -->
            <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="12">
                    <!-- Voice & Engine Selection -->
                    <Expander Header="🎤 Voice &amp; Engine" IsExpanded="True" Margin="0,0,0,16">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="12" Margin="0,8,0,0">
                            <StackPanel>
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <ComboBox Grid.Column="0" 
                                              SelectedItem="{Binding SelectedVoice}" 
                                              ItemsSource="{Binding AvailableVoices}">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="{Binding Gender, Converter={StaticResource GenderToIcon}}" FontSize="14" Margin="0,0,8,0"/>
                                                    <StackPanel Margin="0,0,8,0">
                                                        <TextBlock Text="{Binding DisplayName}" FontWeight="SemiBold"/>
                                                        <TextBlock Text="{Binding Language}" 
                                                                   FontSize="10" 
                                                                   Foreground="{DynamicResource TextSecondaryBrush}"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                    <Button Grid.Column="1" Content="▶" 
                                            Command="{Binding PreviewVoiceCommand}" 
                                            Width="30" Margin="8,0,0,0" 
                                            Background="{DynamicResource AccentRedBrush}"/>
                                </Grid>
                                
                                <TextBlock Text="{Binding SelectedVoice.Description}" 
                                           TextWrapping="Wrap" 
                                           FontSize="11" 
                                           Foreground="{DynamicResource TextSecondaryBrush}" 
                                           MaxHeight="40"/>
                            </StackPanel>
                        </Border>
                    </Expander>
                    
                    <!-- Speech Parameters -->
                    <Expander Header="⚡ Speech Parameters" IsExpanded="True" Margin="0,0,0,16">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="12" Margin="0,8,0,0">
                            <StackPanel>
                                <!-- Speech Rate -->
                                <StackPanel Margin="0,0,0,12">
                                    <Grid Margin="0,0,0,4">
                                        <TextBlock Text="Speech Rate" FontWeight="SemiBold" FontSize="11"/>
                                        <TextBlock Text="{Binding SpeechRate, StringFormat={}x{0:F1}}" 
                                                   HorizontalAlignment="Right" 
                                                   FontSize="11" 
                                                   Foreground="{DynamicResource AccentRedBrush}"/>
                                    </Grid>
                                    <Slider Value="{Binding SpeechRate}" 
                                            Minimum="0.25" Maximum="3.0" 
                                            TickFrequency="0.25" 
                                            IsSnapToTickEnabled="True"/>
                                </StackPanel>
                                
                                <!-- Voice Pitch -->
                                <StackPanel Margin="0,0,0,12">
                                    <Grid Margin="0,0,0,4">
                                        <TextBlock Text="Voice Pitch" FontWeight="SemiBold" FontSize="11"/>
                                        <TextBlock Text="{Binding VoicePitch, StringFormat={}{0:+0.0;-0.0;0.0} semitones}" 
                                                   HorizontalAlignment="Right" 
                                                   FontSize="11" 
                                                   Foreground="{DynamicResource AccentRedBrush}"/>
                                    </Grid>
                                    <Slider Value="{Binding VoicePitch}" 
                                            Minimum="-12.0" Maximum="12.0" 
                                            TickFrequency="1.0" 
                                            IsSnapToTickEnabled="True"/>
                                </StackPanel>
                                
                                <!-- Volume Level -->
                                <StackPanel>
                                    <Grid Margin="0,0,0,4">
                                        <TextBlock Text="Output Volume" FontWeight="SemiBold" FontSize="11"/>
                                        <TextBlock Text="{Binding OutputVolume, StringFormat={}{0}%}" 
                                                   HorizontalAlignment="Right" 
                                                   FontSize="11" 
                                                   Foreground="{DynamicResource AccentRedBrush}"/>
                                    </Grid>
                                    <Slider Value="{Binding OutputVolume}" 
                                            Minimum="0" Maximum="150" 
                                            TickFrequency="10" 
                                            IsSnapToTickEnabled="True"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </Expander>
                    
                    <!-- Advanced Processing -->
                    <Expander Header="🎛️ Audio Processing" IsExpanded="False">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="12" Margin="0,8,0,0">
                            <StackPanel >
                                <CheckBox Content="Apply noise gate" 
                                          IsChecked="{Binding UseNoiseGate}"/>
                                <CheckBox Content="Normalize audio levels" 
                                          IsChecked="{Binding NormalizeAudio}"/>
                                <CheckBox Content="Enhanced clarity filter" 
                                          IsChecked="{Binding EnhanceClarity}"/>
                                
                                <StackPanel Margin="0,8,0,0">
                                    <TextBlock Text="Output Format:" FontSize="11" FontWeight="SemiBold" Margin="0,0,0,4"/>
                                    <ComboBox SelectedItem="{Binding OutputFormat}" 
                                              ItemsSource="{Binding AvailableFormats}"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
            
            <!-- Main Text Input & Waveform Display -->
            <Grid Grid.Column="1" Margin="12">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="120"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Text Input Area -->
                <Border Grid.Row="0" Background="{DynamicResource SecondaryDarkBrush}" 
                        CornerRadius="6" Padding="16">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <StackPanel Grid.Row="0" Orientation="Horizontal" 
                                    Margin="0,0,0,12">
                            <TextBlock Text="📝 Text to Synthesize" 
                                       FontSize="14" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding TextStats}" 
                                       FontSize="11" 
                                       Foreground="{DynamicResource TextSecondaryBrush}"/>
                        </StackPanel>
                        
                        <TextBox Grid.Row="1" 
                                 Text="{Binding TextToSpeak, UpdateSourceTrigger=PropertyChanged}" 
                                 TextWrapping="Wrap" 
                                 AcceptsReturn="True" 
                                 VerticalScrollBarVisibility="Auto" 
                                 Background="Transparent" 
                                 BorderThickness="0" 
                                 FontSize="13" 
                                 Padding="4"/>
                    </Grid>
                </Border>
                
                <!-- Live Waveform Preview -->
                <Border Grid.Row="1" Background="{DynamicResource TertiaryDarkBrush}" 
                        CornerRadius="6" Margin="0,12,0,0" Padding="12">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <StackPanel Grid.Row="0" Orientation="Horizontal" 
                                    Margin="0,0,0,8">
                            <TextBlock Text="🎵 Waveform Preview" 
                                       FontSize="12" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding AudioDuration, StringFormat={}Duration: {0:mm\\:ss}}" 
                                       FontSize="10" 
                                       Foreground="{DynamicResource TextSecondaryBrush}"/>
                        </StackPanel>
                        
                        <!-- Placeholder for waveform visualization -->
                        <Border Grid.Row="1" Background="{DynamicResource PrimaryDarkBrush}" 
                                CornerRadius="3">
                            <TextBlock Text="🌊 Audio waveform will appear here during synthesis" 
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Center" 
                                       FontSize="11" 
                                       Foreground="{DynamicResource TextMutedBrush}"/>
                        </Border>
                    </Grid>
                </Border>
                
                <!-- Generate Controls -->
                <StackPanel Grid.Row="2" Orientation="Horizontal" 
                           HorizontalAlignment="Center" 
                            Margin="0,12,0,0">
                    <Button Content="🎵 Generate Speech" 
                            Command="{Binding GenerateSpeechCommand}" 
                            Background="{DynamicResource AccentRedBrush}" 
                            Padding="20,8" FontWeight="SemiBold"/>
                    <Button Content="⏸️ Stop" 
                            Command="{Binding StopSpeechCommand}" 
                            Background="{DynamicResource ErrorBrush}" 
                            Padding="16,8"/>
                    <Button Content="💾 Save Audio" 
                            Command="{Binding SaveAudioCommand}" 
                            Background="{DynamicResource SuccessBrush}" 
                            Padding="16,8"/>
                </StackPanel>
            </Grid>
            
            <!-- Voice Library & History -->
            <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto">
                <StackPanel  Margin="12">
                    <!-- Quick Voice Library -->
                    <Expander Header="🎭 Voice Library" IsExpanded="True">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="8" Margin="0,8,0,0">
                            <ItemsControl ItemsSource="{Binding FavoriteVoices}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Button Content="{Binding DisplayName}" 
                                                Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext.SelectVoiceCommand}" 
                                                CommandParameter="{Binding}" 
                                                Margin="0,2" 
                                                HorizontalAlignment="Stretch" 
                                                Background="Transparent" 
                                                BorderBrush="{DynamicResource BorderBrush}" 
                                                FontSize="11"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </Border>
                    </Expander>
                    
                    <!-- Recent Generations -->
                    <Expander Header="📚 Recent Audio" IsExpanded="True">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="8" Margin="0,8,0,0">
                            <ItemsControl ItemsSource="{Binding RecentGenerations}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{DynamicResource SecondaryDarkBrush}" 
                                                CornerRadius="3" Padding="8" Margin="0,2">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="{Binding TextPreview}" 
                                                               FontSize="10" 
                                                               TextTrimming="CharacterEllipsis" 
                                                               MaxHeight="20"/>
                                                    <TextBlock Text="{Binding Timestamp, StringFormat={}Generated: {0:MM/dd HH:mm}}" 
                                                               FontSize="9" 
                                                               Foreground="{DynamicResource TextMutedBrush}"/>
                                                </StackPanel>
                                                
                                                <Button Grid.Column="1" Content="▶" 
                                                        Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext.PlayAudioCommand}" 
                                                        CommandParameter="{Binding}" 
                                                        Width="24" Height="24" 
                                                        Background="{DynamicResource AccentRedBrush}" 
                                                        FontSize="10"/>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </Border>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </DataTemplate>
    
    <DataTemplate x:Key="VoiceCloningTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="320"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="280"/>
            </Grid.ColumnDefinitions>
            
            <!-- Clone Configuration -->
            <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
                <StackPanel  Margin="12">
                    <!-- Sample Upload -->
                    <Expander Header="🎤 Voice Sample" IsExpanded="True">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="12" Margin="0,8,0,0">
                            <StackPanel >
                                <Border Background="{DynamicResource SecondaryDarkBrush}" 
                                        BorderBrush="{DynamicResource BorderBrush}" 
                                        BorderThickness="2" 
                                        CornerRadius="4" 
                                        Padding="20" 
                                        AllowDrop="True">
                                    <StackPanel HorizontalAlignment="Center" >
                                        <TextBlock Text="📁" FontSize="24" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Drop audio sample here" 
                                                   FontSize="12" 
                                                   HorizontalAlignment="Center"/>
                                        <TextBlock Text="WAV, MP3, FLAC (10s minimum)" 
                                                   FontSize="10" 
                                                   Foreground="{DynamicResource TextSecondaryBrush}" 
                                                   HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                                
                                <Button Content="🔍 Browse Files" 
                                        Command="{Binding BrowseAudioCommand}" 
                                        HorizontalAlignment="Stretch"/>
                            </StackPanel>
                        </Border>
                    </Expander>
                    
                    <!-- Training Parameters -->
                    <Expander Header="⚙️ Training Settings" IsExpanded="True">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="12" Margin="0,8,0,0">
                            <StackPanel >
                                <StackPanel>
                                    <TextBlock Text="Voice Clone Name" 
                                               FontSize="11" FontWeight="SemiBold" 
                                               Margin="0,0,0,4"/>
                                    <TextBox Text="{Binding VoiceCloneName, UpdateSourceTrigger=PropertyChanged}"/>
                                </StackPanel>
                                
                                <StackPanel>
                                    <Grid Margin="0,0,0,4">
                                        <TextBlock Text="Training Quality" FontWeight="SemiBold" FontSize="11"/>
                                        <TextBlock Text="{Binding TrainingQuality}" 
                                                   HorizontalAlignment="Right" 
                                                   FontSize="11" 
                                                   Foreground="{DynamicResource AccentRedBrush}"/>
                                    </Grid>
                                    <ComboBox SelectedItem="{Binding TrainingQuality}" 
                                              ItemsSource="{Binding QualityLevels}"/>
                                    <TextBlock Text="Higher quality = longer training time" 
                                               FontSize="10" 
                                               Foreground="{DynamicResource TextSecondaryBrush}" 
                                               Margin="0,4,0,0"/>
                                </StackPanel>
                                
                                <CheckBox Content="Enable voice enhancement preprocessing" 
                                          IsChecked="{Binding EnablePreprocessing}"/>
                                <CheckBox Content="Train with emotion variations" 
                                          IsChecked="{Binding TrainEmotions}"/>
                            </StackPanel>
                        </Border>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
            
            <!-- Training Progress & Preview -->
            <Grid Grid.Column="1" Margin="12">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="120"/>
                </Grid.RowDefinitions>
                
                <!-- Sample Analysis -->
                <Border Grid.Row="0" Background="{DynamicResource SecondaryDarkBrush}" 
                        CornerRadius="6" Padding="16">
                    <StackPanel >
                        <StackPanel Orientation="Horizontal" >
                            <TextBlock Text="🧬 Voice Analysis" 
                                       FontSize="16" FontWeight="SemiBold"/>
                            <Border Background="{Binding SampleQualityColor}" 
                                    Padding="6,2" CornerRadius="10">
                                <TextBlock Text="{Binding SampleQuality}" 
                                           FontSize="10" 
                                           Foreground="White"/>
                            </Border>
                        </StackPanel>
                        
                        <!-- Audio Characteristics -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" >
                                <TextBlock Text="Sample Characteristics:" 
                                           FontSize="12" FontWeight="SemiBold"/>
                                <TextBlock Text="{Binding SampleDuration, StringFormat={}Duration: {0:mm\\:ss}}" 
                                           FontSize="11"/>
                                <TextBlock Text="{Binding SampleRate, StringFormat={}Sample Rate: {0} Hz}" 
                                           FontSize="11"/>
                                <TextBlock Text="{Binding BitDepth, StringFormat={}Bit Depth: {0}}" 
                                           FontSize="11"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" >
                                <TextBlock Text="Voice Characteristics:" 
                                           FontSize="12" FontWeight="SemiBold"/>
                                <TextBlock Text="{Binding DetectedGender, StringFormat={}Gender: {0}}" 
                                           FontSize="11"/>
                                <TextBlock Text="{Binding EstimatedAge, StringFormat={}Age Range: {0}}" 
                                           FontSize="11"/>
                                <TextBlock Text="{Binding VoiceType, StringFormat={}Voice Type: {0}}" 
                                           FontSize="11"/>
                            </StackPanel>
                        </Grid>
                        
                        <!-- Preview Original -->
                        <StackPanel Orientation="Horizontal" 
                                   HorizontalAlignment="Center" >
                            <Button Content="▶ Play Sample" 
                                    Command="{Binding PlaySampleCommand}" 
                                    Background="{DynamicResource AccentRedBrush}"/>
                            <Button Content="🎯 Start Training" 
                                    Command="{Binding StartTrainingCommand}" 
                                    Background="{DynamicResource SuccessBrush}" 
                                    FontWeight="SemiBold"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <!-- Training Progress -->
                <Border Grid.Row="1" Background="{DynamicResource TertiaryDarkBrush}" 
                        CornerRadius="6" Padding="12" Margin="0,12,0,0"
                        Visibility="{Binding IsTraining, Converter={StaticResource BoolToVisibility}}">
                    <StackPanel >
                        <StackPanel Orientation="Horizontal" >
                            <TextBlock Text="🚀 Training Voice Clone..." 
                                       FontSize="12" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding TrainingProgress, StringFormat={}{0:P0}}" 
                                       FontSize="12" 
                                       Foreground="{DynamicResource AccentRedBrush}"/>
                        </StackPanel>
                        
                        <ProgressBar Value="{Binding TrainingProgress}" 
                                     Height="8" 
                                     Background="{DynamicResource PrimaryDarkBrush}" 
                                     Foreground="{DynamicResource AccentRedBrush}"/>
                        
                        <TextBlock Text="{Binding EstimatedTimeRemaining, StringFormat={}Estimated time remaining: {0}}" 
                                   FontSize="10" 
                                   Foreground="{DynamicResource TextSecondaryBrush}"/>
                    </StackPanel>
                </Border>
                
                <!-- Training Log -->
                <Border Grid.Row="2" Background="{DynamicResource TertiaryDarkBrush}" 
                        CornerRadius="6" Margin="0,12,0,0">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="8">
                        <TextBlock Text="{Binding TrainingLog}" 
                                   FontFamily="Consolas" 
                                   FontSize="10" 
                                   Foreground="{DynamicResource TextMutedBrush}"/>
                    </ScrollViewer>
                </Border>
            </Grid>
            
            <!-- Clone Library -->
            <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto">
                <StackPanel  Margin="12">
                    <Expander Header="🎭 My Voice Clones" IsExpanded="True">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="8" Margin="0,8,0,0">
                            <ItemsControl ItemsSource="{Binding VoiceClones}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{DynamicResource SecondaryDarkBrush}" 
                                                CornerRadius="3" Padding="10" Margin="0,2">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                                
                                                <StackPanel Grid.Row="0" Orientation="Horizontal">
                                                    <TextBlock Text="{Binding Name}" 
                                                               FontSize="12" FontWeight="SemiBold"/>
                                                    <Border Background="{Binding StatusColor}" 
                                                            Padding="4,1" CornerRadius="8" 
                                                            Margin="8,0,0,0">
                                                        <TextBlock Text="{Binding Status}" 
                                                                   FontSize="8" 
                                                                   Foreground="White"/>
                                                    </Border>
                                                </StackPanel>
                                                
                                                <TextBlock Grid.Row="1" 
                                                           Text="{Binding CreatedDate, StringFormat={}Created: {0:MM/dd/yyyy}}" 
                                                           FontSize="10" 
                                                           Foreground="{DynamicResource TextSecondaryBrush}"/>
                                                
                                                <StackPanel Grid.Row="2" Orientation="Horizontal" 
                                                            Margin="0,6,0,0">
                                                    <Button Content="▶" 
                                                            Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext.TestCloneCommand}" 
                                                            CommandParameter="{Binding}" 
                                                            Width="24" Height="20" 
                                                            FontSize="10"/>
                                                    <Button Content="📝" 
                                                            Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext.UseCloneCommand}" 
                                                            CommandParameter="{Binding}" 
                                                            Width="24" Height="20" 
                                                            FontSize="10"/>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </Border>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </DataTemplate>
    
    <DataTemplate x:Key="RealTimeSynthesisTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="280"/>
            </Grid.ColumnDefinitions>
            
            <!-- Real-Time Controls -->
            <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
                <StackPanel  Margin="12">
                    <!-- Live Session -->
                    <Expander Header="⚡ Live Session" IsExpanded="True">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="12" Margin="0,8,0,0">
                            <StackPanel >
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" >
                                    <TextBlock Text="🎙️" FontSize="18"/>
                                    <TextBlock Text="{Binding CurrentVoice.DisplayName}" 
                                               FontSize="14" FontWeight="SemiBold"/>
                                </StackPanel>
                                
                                <!-- Main Talk Button -->
                                <Button Content="{Binding IsSpeaking, Converter={StaticResource SpeakingToText}}" 
                                        Command="{Binding ToggleSpeechCommand}" 
                                        Background="{Binding IsSpeaking, Converter={StaticResource SpeakingToBrush}}" 
                                        FontSize="16" FontWeight="Bold" 
                                        Padding="20,12" 
                                        HorizontalAlignment="Stretch"/>
                                
                                <!-- Quick Controls -->
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Button Grid.Column="0" Content="⏸️" 
                                            Command="{Binding PauseSpeechCommand}" 
                                            Margin="0,0,4,0"/>
                                    <Button Grid.Column="1" Content="⏹️" 
                                            Command="{Binding StopSpeechCommand}" 
                                            Margin="4,0,0,0"/>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </Expander>
                    
                    <!-- Live Parameters -->
                    <Expander Header="🎛️ Live Adjustments" IsExpanded="True">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="12" Margin="0,8,0,0">
                            <StackPanel >
                                <!-- Speed -->
                                <StackPanel>
                                    <Grid Margin="0,0,0,4">
                                        <TextBlock Text="Speed" FontWeight="SemiBold" FontSize="11"/>
                                        <TextBlock Text="{Binding LiveSpeed, StringFormat={}x{0:F1}}" 
                                                   HorizontalAlignment="Right" 
                                                   FontSize="11" 
                                                   Foreground="{DynamicResource AccentRedBrush}"/>
                                    </Grid>
                                    <Slider Value="{Binding LiveSpeed}" 
                                            Minimum="0.5" Maximum="2.5" 
                                            TickFrequency="0.1"/>
                                </StackPanel>
                                
                                <!-- Pitch -->
                                <StackPanel>
                                    <Grid Margin="0,0,0,4">
                                        <TextBlock Text="Pitch" FontWeight="SemiBold" FontSize="11"/>
                                        <TextBlock Text="{Binding LivePitch, StringFormat={}{0:+0;-0;0} st}" 
                                                   HorizontalAlignment="Right" 
                                                   FontSize="11" 
                                                   Foreground="{DynamicResource AccentRedBrush}"/>
                                    </Grid>
                                    <Slider Value="{Binding LivePitch}" 
                                            Minimum="-6" Maximum="6" 
                                            TickFrequency="0.5"/>
                                </StackPanel>
                                
                                <!-- Volume -->
                                <StackPanel>
                                    <Grid Margin="0,0,0,4">
                                        <TextBlock Text="Volume" FontWeight="SemiBold" FontSize="11"/>
                                        <TextBlock Text="{Binding LiveVolume, StringFormat={}{0}%}" 
                                                   HorizontalAlignment="Right" 
                                                   FontSize="11" 
                                                   Foreground="{DynamicResource AccentRedBrush}"/>
                                    </Grid>
                                    <Slider Value="{Binding LiveVolume}" 
                                            Minimum="0" Maximum="100" 
                                            TickFrequency="5"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
            
            <!-- Live Text Input & Visualization -->
            <Grid Grid.Column="1" Margin="12">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="120"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Live Text Area -->
                <Border Grid.Row="0" Background="{DynamicResource SecondaryDarkBrush}" 
                        CornerRadius="6" Padding="16">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Text="💬 Live Speech Input" 
                                   FontSize="14" FontWeight="SemiBold" 
                                   Margin="0,0,0,12"/>
                        
                        <TextBox Grid.Row="1" 
                                 Text="{Binding LiveText, UpdateSourceTrigger=PropertyChanged}" 
                                 TextWrapping="Wrap" 
                                 AcceptsReturn="True" 
                                 VerticalScrollBarVisibility="Auto" 
                                 Background="Transparent" 
                                 BorderThickness="0" 
                                 FontSize="13" 
                                 Padding="4"/>
                    </Grid>
                </Border>
                
                <!-- Live Audio Visualization -->
                <Border Grid.Row="1" Background="{DynamicResource TertiaryDarkBrush}" 
                        CornerRadius="6" Margin="0,12,0,0" Padding="12">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <StackPanel Grid.Row="0" Orientation="Horizontal" 
                                    Margin="0,0,0,8">
                            <TextBlock Text="🎵 Live Audio Monitor" 
                                       FontSize="12" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding CurrentPosition, StringFormat={}Position: {0:mm\\:ss}}" 
                                       FontSize="10" 
                                       Foreground="{DynamicResource TextSecondaryBrush}"/>
                        </StackPanel>
                        
                        <!-- Live waveform placeholder -->
                        <Border Grid.Row="1" Background="{DynamicResource PrimaryDarkBrush}" 
                                CornerRadius="3">
                            <TextBlock Text="🌊 Live audio visualization" 
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Center" 
                                       FontSize="11" 
                                       Foreground="{DynamicResource TextMutedBrush}"/>
                        </Border>
                    </Grid>
                </Border>
                
                <!-- Session Controls -->
                <StackPanel Grid.Row="2" Orientation="Horizontal" 
                           HorizontalAlignment="Center" 
                            Margin="0,12,0,0">
                    <Button Content="🎤 Start Session" 
                            Command="{Binding StartSessionCommand}" 
                            Background="{DynamicResource AccentRedBrush}" 
                            Padding="16,8" FontWeight="SemiBold"/>
                    <Button Content="💾 Save Session" 
                            Command="{Binding SaveSessionCommand}" 
                            Background="{DynamicResource SuccessBrush}" 
                            Padding="14,8"/>
                    <Button Content="🔄 Reset" 
                            Command="{Binding ResetSessionCommand}" 
                            Padding="14,8"/>
                </StackPanel>
            </Grid>
            
            <!-- Session History -->
            <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto">
                <StackPanel  Margin="12">
                    <Expander Header="📝 Session Log" IsExpanded="True">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="8" Margin="0,8,0,0">
                            <ItemsControl ItemsSource="{Binding SessionHistory}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{DynamicResource SecondaryDarkBrush}" 
                                                CornerRadius="3" Padding="8" Margin="0,2">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="{Binding TextPreview}" 
                                                               FontSize="10" 
                                                               TextTrimming="CharacterEllipsis" 
                                                               MaxHeight="20"/>
                                                    <TextBlock Text="{Binding Duration, StringFormat={}Duration: {0:mm\\:ss}}" 
                                                               FontSize="9" 
                                                               Foreground="{DynamicResource TextMutedBrush}"/>
                                                </StackPanel>
                                                
                                                <Button Grid.Column="1" Content="▶" 
                                                        Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext.ReplayCommand}" 
                                                        CommandParameter="{Binding}" 
                                                        Width="24" Height="24" 
                                                        FontSize="10"/>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </Border>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </DataTemplate>
    
    <DataTemplate x:Key="AudioProcessingTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="260"/>
            </Grid.ColumnDefinitions>
            
            <!-- Processing Parameters -->
            <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
                <StackPanel  Margin="12">
                    <!-- Audio Enhancement -->
                    <Expander Header="✨ Audio Enhancement" IsExpanded="True">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="12" Margin="0,8,0,0">
                            <StackPanel >
                                <CheckBox Content="Noise reduction" 
                                          IsChecked="{Binding EnableNoiseReduction}"/>
                                <CheckBox Content="Audio normalization" 
                                          IsChecked="{Binding EnableNormalization}"/>
                                <CheckBox Content="Voice enhancement" 
                                          IsChecked="{Binding EnableVoiceEnhancement}"/>
                                <CheckBox Content="Echo removal" 
                                          IsChecked="{Binding EnableEchoRemoval}"/>
                                
                                <!-- Enhancement Strength -->
                                <StackPanel>
                                    <Grid Margin="0,0,0,4">
                                        <TextBlock Text="Enhancement Strength" FontWeight="SemiBold" FontSize="11"/>
                                        <TextBlock Text="{Binding EnhancementStrength, StringFormat={}{0}%}" 
                                                   HorizontalAlignment="Right" 
                                                   FontSize="11" 
                                                   Foreground="{DynamicResource AccentRedBrush}"/>
                                    </Grid>
                                    <Slider Value="{Binding EnhancementStrength}" 
                                            Minimum="0" Maximum="100" 
                                            TickFrequency="10"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </Expander>
                    
                    <!-- Output Settings -->
                    <Expander Header="💾 Output Settings" IsExpanded="True">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="12" Margin="0,8,0,0">
                            <StackPanel >
                                <StackPanel>
                                    <TextBlock Text="Output Format:" FontSize="11" FontWeight="SemiBold" Margin="0,0,0,4"/>
                                    <ComboBox SelectedItem="{Binding OutputFormat}" 
                                              ItemsSource="{Binding AvailableFormats}"/>
                                </StackPanel>
                                
                                <StackPanel>
                                    <TextBlock Text="Quality Level:" FontSize="11" FontWeight="SemiBold" Margin="0,0,0,4"/>
                                    <ComboBox SelectedItem="{Binding QualityLevel}" 
                                              ItemsSource="{Binding QualityLevels}"/>
                                </StackPanel>
                                
                                <StackPanel>
                                    <Grid Margin="0,0,0,4">
                                        <TextBlock Text="Output Volume" FontWeight="SemiBold" FontSize="11"/>
                                        <TextBlock Text="{Binding OutputVolume, StringFormat={}{0}%}" 
                                                   HorizontalAlignment="Right" 
                                                   FontSize="11" 
                                                   Foreground="{DynamicResource AccentRedBrush}"/>
                                    </Grid>
                                    <Slider Value="{Binding OutputVolume}" 
                                            Minimum="0" Maximum="150" 
                                            TickFrequency="10"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
            
            <!-- Audio Processing Interface -->
            <Grid Grid.Column="1" Margin="12">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="120"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- File Input -->
                <Border Grid.Row="0" Background="{DynamicResource SecondaryDarkBrush}" 
                        CornerRadius="6" Padding="16" Margin="0,0,0,12">
                    <StackPanel >
                        <TextBlock Text="🎵 Audio File Processing" 
                                   FontSize="16" FontWeight="SemiBold"/>
                        
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                BorderBrush="{DynamicResource BorderBrush}" 
                                BorderThickness="2" 
                                CornerRadius="4" 
                                Padding="30" 
                                AllowDrop="True">
                            <StackPanel HorizontalAlignment="Center" >
                                <TextBlock Text="📁" FontSize="32" HorizontalAlignment="Center"/>
                                <TextBlock Text="Drop audio files here for processing" 
                                           FontSize="13" 
                                           HorizontalAlignment="Center"/>
                                <TextBlock Text="Supported: WAV, MP3, FLAC, OGG, M4A" 
                                           FontSize="11" 
                                           Foreground="{DynamicResource TextSecondaryBrush}" 
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        
                        <StackPanel Orientation="Horizontal" 
                                   HorizontalAlignment="Center" >
                            <Button Content="🔍 Browse Files" 
                                    Command="{Binding BrowseFilesCommand}" 
                                    Padding="16,6"/>
                            <Button Content="🎤 Record New" 
                                    Command="{Binding RecordNewCommand}" 
                                    Background="{DynamicResource AccentRedBrush}" 
                                    Padding="16,6"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <!-- Before/After Comparison -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Before -->
                    <Border Grid.Column="0" Background="{DynamicResource TertiaryDarkBrush}" 
                            CornerRadius="6" Padding="12" Margin="0,0,6,0">
                        <StackPanel >
                            <StackPanel Orientation="Horizontal" >
                                <TextBlock Text="📥 Original" FontSize="12" FontWeight="SemiBold"/>
                                <TextBlock Text="{Binding OriginalFileSize}" 
                                           FontSize="10" 
                                           Foreground="{DynamicResource TextSecondaryBrush}"/>
                            </StackPanel>
                            
                            <!-- Waveform placeholder -->
                            <Border Background="{DynamicResource PrimaryDarkBrush}" 
                                    Height="60" CornerRadius="3">
                                <TextBlock Text="Original waveform" 
                                           HorizontalAlignment="Center" 
                                           VerticalAlignment="Center" 
                                           FontSize="10" 
                                           Foreground="{DynamicResource TextMutedBrush}"/>
                            </Border>
                            
                            <Button Content="▶ Play Original" 
                                    Command="{Binding PlayOriginalCommand}" 
                                    HorizontalAlignment="Stretch" 
                                    Padding="8,4" FontSize="10"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- After -->
                    <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" 
                            CornerRadius="6" Padding="12" Margin="6,0,0,0">
                        <StackPanel >
                            <StackPanel Orientation="Horizontal" >
                                <TextBlock Text="✨ Processed" FontSize="12" FontWeight="SemiBold"/>
                                <TextBlock Text="{Binding ProcessedFileSize}" 
                                           FontSize="10" 
                                           Foreground="{DynamicResource TextSecondaryBrush}"/>
                            </StackPanel>
                            
                            <!-- Waveform placeholder -->
                            <Border Background="{DynamicResource PrimaryDarkBrush}" 
                                    Height="60" CornerRadius="3">
                                <TextBlock Text="Enhanced waveform" 
                                           HorizontalAlignment="Center" 
                                           VerticalAlignment="Center" 
                                           FontSize="10" 
                                           Foreground="{DynamicResource TextMutedBrush}"/>
                            </Border>
                            
                            <Button Content="▶ Play Enhanced" 
                                    Command="{Binding PlayProcessedCommand}" 
                                    HorizontalAlignment="Stretch" 
                                    Background="{DynamicResource AccentRedBrush}" 
                                    Padding="8,4" FontSize="10"/>
                        </StackPanel>
                    </Border>
                </Grid>
                
                <!-- Processing Progress -->
                <Border Grid.Row="2" Background="{DynamicResource SecondaryDarkBrush}" 
                        CornerRadius="6" Padding="12" Margin="0,12,0,0"
                        Visibility="{Binding IsProcessing, Converter={StaticResource BoolToVisibility}}">
                    <StackPanel >
                        <StackPanel Orientation="Horizontal" >
                            <TextBlock Text="🔄 Processing Audio..." 
                                       FontSize="12" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding ProcessingProgress, StringFormat={}{0:P0}}" 
                                       FontSize="12" 
                                       Foreground="{DynamicResource AccentRedBrush}"/>
                        </StackPanel>
                        
                        <ProgressBar Value="{Binding ProcessingProgress}" 
                                     Height="8" 
                                     Background="{DynamicResource PrimaryDarkBrush}" 
                                     Foreground="{DynamicResource AccentRedBrush}"/>
                        
                        <TextBlock Text="{Binding CurrentProcessingStep}" 
                                   FontSize="10" 
                                   Foreground="{DynamicResource TextSecondaryBrush}"/>
                    </StackPanel>
                </Border>
                
                <!-- Action Buttons -->
                <StackPanel Grid.Row="3" Orientation="Horizontal" 
                           HorizontalAlignment="Center" 
                            Margin="0,12,0,0">
                    <Button Content="🎯 Process Audio" 
                            Command="{Binding ProcessAudioCommand}" 
                            Background="{DynamicResource AccentRedBrush}" 
                            Padding="20,8" FontWeight="SemiBold"/>
                    <Button Content="💾 Save Processed" 
                            Command="{Binding SaveProcessedCommand}" 
                            Background="{DynamicResource SuccessBrush}" 
                            Padding="16,8"/>
                    <Button Content="🔄 Reset" 
                            Command="{Binding ResetCommand}" 
                            Padding="16,8"/>
                </StackPanel>
            </Grid>
            
            <!-- Processing History -->
            <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto">
                <StackPanel  Margin="12">
                    <Expander Header="📚 Recent Processing" IsExpanded="True">
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="4" Padding="8" Margin="0,8,0,0">
                            <ItemsControl ItemsSource="{Binding ProcessingHistory}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{DynamicResource SecondaryDarkBrush}" 
                                                CornerRadius="3" Padding="8" Margin="0,2">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                                
                                                <TextBlock Grid.Row="0" Text="{Binding FileName}" 
                                                           FontSize="11" FontWeight="SemiBold" 
                                                           TextTrimming="CharacterEllipsis"/>
                                                
                                                <StackPanel Grid.Row="1" Orientation="Horizontal" >
                                                    <TextBlock Text="{Binding ProcessingType}" 
                                                               FontSize="9" 
                                                               Foreground="{DynamicResource TextSecondaryBrush}"/>
                                                    <TextBlock Text="{Binding ProcessingDate, StringFormat={}{0:MM/dd HH:mm}}" 
                                                               FontSize="9" 
                                                               Foreground="{DynamicResource TextMutedBrush}"/>
                                                </StackPanel>
                                                
                                                <StackPanel Grid.Row="2" Orientation="Horizontal" 
                                                            Margin="0,4,0,0">
                                                    <Button Content="▶" 
                                                            Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext.PlayHistoryCommand}" 
                                                            CommandParameter="{Binding}" 
                                                            Width="20" Height="18" 
                                                            FontSize="8"/>
                                                    <Button Content="💾" 
                                                            Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext.SaveHistoryCommand}" 
                                                            CommandParameter="{Binding}" 
                                                            Width="20" Height="18" 
                                                            FontSize="8"/>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </Border>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </DataTemplate>
    
    <!-- Image Generation Template - Text2Image Professional -->
    <DataTemplate x:Key="Text2ImageTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="320"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="280"/>
            </Grid.ColumnDefinitions>
            
            <!-- Controls Panel -->
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="8,0,0,8" Padding="16">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="Image Generation" 
                                   Style="{DynamicResource HeadingSmallStyle}"
                                   Foreground="{DynamicResource AccentPurpleBrush}"
                                   Margin="0,0,0,16"/>
                        
                        <!-- Prompt Input -->
                        <TextBlock Text="Prompt" Style="{DynamicResource CaptionTextStyle}"
                                   Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,0,4"/>
                        <TextBox Text="{Binding Prompt, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{DynamicResource DarkTextBoxStyle}" 
                                 MinHeight="80" TextWrapping="Wrap" AcceptsReturn="True"
                                 Margin="0,0,0,12"/>
                        
                        <!-- Negative Prompt -->
                        <TextBlock Text="Negative Prompt" Style="{DynamicResource CaptionTextStyle}"
                                   Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,0,4"/>
                        <TextBox Text="{Binding NegativePrompt, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{DynamicResource DarkTextBoxStyle}" 
                                 MinHeight="60" TextWrapping="Wrap" AcceptsReturn="True"
                                 Margin="0,0,0,16"/>
                        
                        <!-- Essential Parameters Panel (Always Visible) -->
                        <Border Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="4" Padding="12" Margin="0,0,0,12">
                            <StackPanel>
                                <TextBlock Text="Essential Settings" Style="{DynamicResource CaptionTextStyle}" 
                                           Foreground="{DynamicResource AccentPurpleBrush}" Margin="0,0,0,8"/>
                                
                                <!-- Steps with Quality Indicator -->
                                <Grid Margin="0,0,0,12">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="60"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Quality (Steps)" VerticalAlignment="Center"/>
                                        <TextBox Grid.Column="1" Text="{Binding Steps, UpdateSourceTrigger=PropertyChanged}" 
                                                 Style="{DynamicResource DarkTextBoxStyle}"/>
                                    </Grid>
                                    <Slider Grid.Row="1" Minimum="15" Maximum="50" Value="{Binding Steps}" 
                                            Margin="0,4,0,0" TickPlacement="BottomRight" TickFrequency="5"/>
                                </Grid>
                                
                                <!-- CFG Scale with Prompt Adherence Label -->
                                <Grid Margin="0,0,0,12">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="60"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Prompt Adherence (CFG)" VerticalAlignment="Center"/>
                                        <TextBox Grid.Column="1" Text="{Binding CfgScale, UpdateSourceTrigger=PropertyChanged}" 
                                                 Style="{DynamicResource DarkTextBoxStyle}"/>
                                    </Grid>
                                    <Slider Grid.Row="1" Minimum="3" Maximum="15" Value="{Binding CfgScale}" 
                                            Margin="0,4,0,0" TickPlacement="BottomRight" TickFrequency="2"/>
                                </Grid>
                            </StackPanel>
                        </Border>
                        
                        <!-- Advanced Parameters (Collapsible) -->
                        <Expander Header="Advanced Settings" IsExpanded="False" Margin="0,0,0,12">
                            <StackPanel Margin="0,8,0,0">
                                <!-- Sampler with Performance Notes -->
                                <Grid Margin="0,0,0,12">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Row="0" Text="Sampler Method" Margin="0,0,0,4"/>
                                    <ComboBox Grid.Row="1" SelectedValue="{Binding Sampler}" Style="{DynamicResource DarkComboBoxStyle}">
                                        <ComboBoxItem Content="DPM++ 2M Karras (Recommended)" Tag="dpmpp_2m_karras"/>
                                        <ComboBoxItem Content="Euler A (Fast)" Tag="euler_a"/>
                                        <ComboBoxItem Content="DDIM (Stable)" Tag="ddim"/>
                                        <ComboBoxItem Content="LMS (Legacy)" Tag="lms"/>
                                    </ComboBox>
                                </Grid>
                                
                                <!-- Seed Control for Reproducibility -->
                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="80"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="Seed (Reproducibility)" Margin="0,0,0,4"/>
                                        <TextBlock Text="Use same seed for identical results" Style="{DynamicResource CaptionTextStyle}" 
                                                   Foreground="{DynamicResource TextMutedBrush}" FontSize="10"/>
                                    </StackPanel>
                                    <TextBox Grid.Column="1" Text="{Binding Seed, UpdateSourceTrigger=PropertyChanged}" 
                                             Style="{DynamicResource DarkTextBoxStyle}"/>
                                    <Button Grid.Column="2" Content="🎲" ToolTip="Random Seed" 
                                            Command="{Binding RandomizeSeedCommand}" 
                                            Style="{DynamicResource SecondaryButtonStyle}" 
                                            Width="28" Height="28" Margin="4,0,0,0"/>
                                </Grid>
                                
                                <!-- Batch Size with Cost Estimation -->
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="60"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="Batch Size"/>
                                        <TextBlock Text="{Binding BatchCostEstimate}" Style="{DynamicResource CaptionTextStyle}" 
                                                   Foreground="{DynamicResource TextMutedBrush}" FontSize="10"/>
                                    </StackPanel>
                                    <TextBox Grid.Column="1" Text="{Binding BatchSize, UpdateSourceTrigger=PropertyChanged}" 
                                             Style="{DynamicResource DarkTextBoxStyle}"/>
                                </Grid>
                            </StackPanel>
                        </Expander>
                        
                        <!-- Generate Button -->
                        <Button Content="Generate Image" 
                                Command="{Binding GenerateCommand}"
                                IsEnabled="{Binding CanGenerate}"
                                Style="{DynamicResource PrimaryButtonStyle}"
                                Padding="0,12" FontSize="14" FontWeight="SemiBold"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>
            
            <!-- Preview Panel -->
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" 
                    Padding="20" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1,0">
                <Grid>
                    <Border Background="{DynamicResource PrimaryDarkBrush}" 
                            CornerRadius="8" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
                        <Grid>
                            <Image Source="{Binding GeneratedImageSource}" 
                                   Stretch="Uniform"
                                   Visibility="{Binding HasGeneratedImage, Converter={StaticResource BoolToVisibility}}"/>
                            <TextBlock Text="🖼️ Generated image will appear here" 
                                       HorizontalAlignment="Center" VerticalAlignment="Center"
                                       Style="{DynamicResource CaptionTextStyle}"
                                       Foreground="{DynamicResource TextMutedBrush}"
                                       Visibility="{Binding HasGeneratedImage, Converter={StaticResource BoolToVisibility}, ConverterParameter=Inverted}"/>
                        </Grid>
                    </Border>
                </Grid>
            </Border>
            
            <!-- History Panel -->
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="0,8,8,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Generation History" 
                               Style="{DynamicResource HeadingSmallStyle}"
                               Foreground="{DynamicResource AccentPurpleBrush}"
                               Margin="0,0,0,12"/>
                    
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <ListBox ItemsSource="{Binding GenerationHistory}"
                                 Style="{DynamicResource DarkListBoxStyle}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Border Padding="8" Margin="0,0,0,4" 
                                            Background="{DynamicResource TertiaryDarkBrush}" 
                                            CornerRadius="4">
                                        <StackPanel>
                                            <TextBlock Text="{Binding Prompt}" 
                                                      Style="{DynamicResource CaptionTextStyle}"
                                                      TextWrapping="Wrap" MaxHeight="40"/>
                                            <TextBlock Text="{Binding Timestamp}" 
                                                      Style="{DynamicResource CodeTextStyle}"
                                                      FontSize="9" 
                                                      Foreground="{DynamicResource TextMutedBrush}"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </ScrollViewer>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>

    <!-- Text2Video Template - Professional Video Generation -->
    <DataTemplate x:Key="Text2VideoTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="320"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="280"/>
            </Grid.ColumnDefinitions>
            
            <!-- Controls Panel -->
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="8,0,0,8" Padding="16">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="Video Generation" 
                                   Style="{DynamicResource HeadingSmallStyle}"
                                   Foreground="{DynamicResource AccentPurpleBrush}"
                                   Margin="0,0,0,16"/>
                        
                        <!-- Motion Prompt -->
                        <TextBlock Text="Motion Description" Style="{DynamicResource CaptionTextStyle}"
                                   Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,0,4"/>
                        <TextBox Style="{DynamicResource DarkTextBoxStyle}" 
                                 MinHeight="80" TextWrapping="Wrap" AcceptsReturn="True"
                                 Margin="0,0,0,16"/>
                        
                        <!-- Professional Video Parameters -->
                        <Expander Header="Video Parameters" IsExpanded="True" Margin="0,0,0,12">
                            <StackPanel Margin="0,8,0,0">
                                <!-- Duration -->
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="80"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Duration (seconds)" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Column="1" Style="{DynamicResource DarkComboBoxStyle}">
                                        <ComboBoxItem Content="2s"/>
                                        <ComboBoxItem Content="4s" IsSelected="True"/>
                                        <ComboBoxItem Content="8s"/>
                                    </ComboBox>
                                </Grid>
                                
                                <!-- Motion Strength -->
                                <TextBlock Text="Motion Intensity" Margin="0,0,0,4"/>
                                <Slider Value="{Binding MotionIntensity}" 
                                        Minimum="0" Maximum="1" 
                                        TickFrequency="0.1" 
                                        TickPlacement="BottomRight"/>
                                
                                <!-- Frame Rate -->
                                <Grid Margin="0,8,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="80"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Frame Rate" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Column="1" 
                                              ItemsSource="{Binding FrameRateOptions}" 
                                              SelectedItem="{Binding SelectedFrameRate}"
                                              DisplayMemberPath="Display"
                                              SelectedValuePath="Value"
                                              Style="{DynamicResource DarkComboBoxStyle}"/>
                                </Grid>
                            </StackPanel>
                        </Expander>
                        
                        <!-- Generate Button -->
                        <Button Content="Generate Video" 
                                Style="{DynamicResource PrimaryButtonStyle}"
                                Padding="0,12" FontSize="14" FontWeight="SemiBold"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>
            
            <!-- Preview Panel -->
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" 
                    Padding="20" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1,0">
                <Grid>
                    <Border Background="{DynamicResource PrimaryDarkBrush}" 
                            CornerRadius="8" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1"
                            MinHeight="300">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="🎬" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                            <TextBlock Text="Generated video preview" 
                                       Style="{DynamicResource CaptionTextStyle}"
                                       Foreground="{DynamicResource TextMutedBrush}"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>
            
            <!-- History Panel -->
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="0,8,8,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Video Library" 
                               Style="{DynamicResource HeadingSmallStyle}"
                               Foreground="{DynamicResource AccentPurpleBrush}"
                               Margin="0,0,0,12"/>
                    
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <TextBlock Text="Generated videos will appear here" 
                                   Style="{DynamicResource CaptionTextStyle}"
                                   Foreground="{DynamicResource TextMutedBrush}"/>
                    </ScrollViewer>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>


    <!-- Entity Creation Template - Professional Character Development -->
    <DataTemplate x:Key="EntityCreationTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="320"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="280"/>
            </Grid.ColumnDefinitions>
            
            <!-- Entity Configuration -->
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="8,0,0,8" Padding="16">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="Entity Development" 
                                   Style="{DynamicResource HeadingSmallStyle}"
                                   Foreground="{DynamicResource AccentPurpleBrush}"
                                   Margin="0,0,0,16"/>
                        
                        <!-- Basic Identity -->
                        <Expander Header="Core Identity" IsExpanded="True" Margin="0,0,0,12">
                            <StackPanel Margin="0,8,0,0">
                                <TextBlock Text="Entity Name" Margin="0,0,0,4"/>
                                <TextBox Style="{DynamicResource DarkTextBoxStyle}" Margin="0,0,0,8"/>
                                
                                <TextBlock Text="Archetype" Margin="0,0,0,4"/>
                                <ComboBox Style="{DynamicResource DarkComboBoxStyle}" Margin="0,0,0,8">
                                    <ComboBoxItem Content="Virtual Assistant"/>
                                    <ComboBoxItem Content="Academic Expert"/>
                                    <ComboBoxItem Content="Creative Partner" IsSelected="True"/>
                                    <ComboBoxItem Content="Technical Specialist"/>
                                </ComboBox>
                                
                                <TextBlock Text="Personality Brief" Margin="0,0,0,4"/>
                                <TextBox Style="{DynamicResource DarkTextBoxStyle}" 
                                         MinHeight="60" TextWrapping="Wrap" AcceptsReturn="True"/>
                            </StackPanel>
                        </Expander>
                        
                        <!-- Behavioral Parameters -->
                        <Expander Header="Behavioral Tuning" IsExpanded="False" Margin="0,0,0,12">
                            <StackPanel Margin="0,8,0,0">
                                <!-- Creativity -->
                                <TextBlock Text="Creativity Level" Margin="0,0,0,4"/>
                                <Slider Value="0.7" Minimum="0" Maximum="1" 
                                        TickFrequency="0.1" TickPlacement="BottomRight" Margin="0,0,0,8"/>
                                
                                <!-- Formality -->
                                <TextBlock Text="Communication Style" Margin="0,0,0,4"/>
                                <Slider Value="0.5" Minimum="0" Maximum="1" 
                                        TickFrequency="0.1" TickPlacement="BottomRight" Margin="0,0,0,8"/>
                                
                                <!-- Response Length -->
                                <TextBlock Text="Response Verbosity" Margin="0,0,0,4"/>
                                <ComboBox Style="{DynamicResource DarkComboBoxStyle}">
                                    <ComboBoxItem Content="Concise"/>
                                    <ComboBoxItem Content="Balanced" IsSelected="True"/>
                                    <ComboBoxItem Content="Detailed"/>
                                </ComboBox>
                            </StackPanel>
                        </Expander>
                        
                        <!-- Voice Integration -->
                        <Expander Header="Voice &amp; Avatar" IsExpanded="False" Margin="0,0,0,12">
                            <StackPanel Margin="0,8,0,0">
                                <TextBlock Text="Voice Profile" Margin="0,0,0,4"/>
                                <ComboBox Style="{DynamicResource DarkComboBoxStyle}" Margin="0,0,0,8">
                                    <ComboBoxItem Content="Neural Voice A"/>
                                    <ComboBoxItem Content="Neural Voice B" IsSelected="True"/>
                                    <ComboBoxItem Content="Custom Voice"/>
                                </ComboBox>
                                
                                <TextBlock Text="Avatar Model" Margin="0,0,0,4"/>
                                <ComboBox Style="{DynamicResource DarkComboBoxStyle}">
                                    <ComboBoxItem Content="Default Humanoid" IsSelected="True"/>
                                    <ComboBoxItem Content="Abstract Form"/>
                                    <ComboBoxItem Content="Custom Model"/>
                                </ComboBox>
                            </StackPanel>
                        </Expander>
                        
                        <!-- Create Button -->
                        <Button Content="Create Entity" 
                                Style="{DynamicResource PrimaryButtonStyle}"
                                Padding="0,12" FontSize="14" FontWeight="SemiBold"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>
            
            <!-- 3D Avatar Preview -->
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" 
                    Padding="20" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1,0">
                <Grid>
                    <Border Background="{DynamicResource PrimaryDarkBrush}" 
                            CornerRadius="8" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="🧙‍♂️" FontSize="64" HorizontalAlignment="Center" Margin="0,0,0,16"/>
                            <TextBlock Text="3D Avatar Renderer" 
                                       Style="{DynamicResource HeadingSmallStyle}"
                                       Foreground="{DynamicResource AccentPurpleBrush}"
                                       HorizontalAlignment="Center" Margin="0,0,0,8"/>
                            <TextBlock Text="Entity appearance will be displayed here" 
                                       Style="{DynamicResource CaptionTextStyle}"
                                       Foreground="{DynamicResource TextMutedBrush}"/>
                            
                            <!-- Camera Controls -->
                            <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
                                <Button Content="🔄" Style="{DynamicResource GhostButtonStyle}" 
                                        ToolTip="Rotate" Margin="0,0,4,0"/>
                                <Button Content="🔍" Style="{DynamicResource GhostButtonStyle}" 
                                        ToolTip="Zoom" Margin="0,0,4,0"/>
                                <Button Content="💡" Style="{DynamicResource GhostButtonStyle}" 
                                        ToolTip="Lighting"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>
            
            <!-- Entity Templates -->
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="0,8,8,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Entity Templates" 
                               Style="{DynamicResource HeadingSmallStyle}"
                               Foreground="{DynamicResource AccentPurpleBrush}"
                               Margin="0,0,0,12"/>
                    
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <!-- Template Cards -->
                            <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                    CornerRadius="4" Padding="8" Margin="0,0,0,8">
                                <StackPanel>
                                    <TextBlock Text="Creative Partner" FontWeight="SemiBold" FontSize="12"/>
                                    <TextBlock Text="Imaginative • Collaborative • Inspiring" 
                                               Style="{DynamicResource CaptionTextStyle}" FontSize="10"/>
                                    <Button Content="Load Template" Style="{DynamicResource GhostButtonStyle}" 
                                            Padding="4" Margin="0,4,0,0" HorizontalAlignment="Left"/>
                                </StackPanel>
                            </Border>
                            
                            <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                    CornerRadius="4" Padding="8" Margin="0,0,0,8">
                                <StackPanel>
                                    <TextBlock Text="Technical Expert" FontWeight="SemiBold" FontSize="12"/>
                                    <TextBlock Text="Precise • Analytical • Detail-oriented" 
                                               Style="{DynamicResource CaptionTextStyle}" FontSize="10"/>
                                    <Button Content="Load Template" Style="{DynamicResource GhostButtonStyle}" 
                                            Padding="4" Margin="0,4,0,0" HorizontalAlignment="Left"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>

    <!-- 3D Model Viewer Template - Professional 3D Interface -->
    <DataTemplate x:Key="ThreeDModelViewerTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="280"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="280"/>
            </Grid.ColumnDefinitions>
            
            <!-- Model Browser -->
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="8,0,0,8" Padding="16">
                <StackPanel>
                    <TextBlock Text="Model Browser" 
                               Style="{DynamicResource HeadingSmallStyle}"
                               Foreground="{DynamicResource AccentPurpleBrush}"
                               Margin="0,0,0,16"/>
                    
                    <!-- File Tree -->
                    <TreeView Background="Transparent" BorderThickness="0" MaxHeight="400">
                        <TreeViewItem Header="📁 Models" IsExpanded="True">
                            <TreeViewItem Header="📁 Characters">
                                <TreeViewItem Header="🧙‍♂️ wizard.fbx"/>
                                <TreeViewItem Header="👩‍🚀 astronaut.obj"/>
                            </TreeViewItem>
                            <TreeViewItem Header="📁 Environments">
                                <TreeViewItem Header="🏰 castle.blend"/>
                                <TreeViewItem Header="🌍 terrain.fbx"/>
                            </TreeViewItem>
                            <TreeViewItem Header="📁 Objects">
                                <TreeViewItem Header="⚔️ sword.obj"/>
                                <TreeViewItem Header="📚 book.fbx"/>
                            </TreeViewItem>
                        </TreeViewItem>
                    </TreeView>
                    
                    <!-- Load Controls -->
                    <StackPanel Margin="0,16,0,0">
                        <Button Content="Load Selected Model" 
                                Style="{DynamicResource PrimaryButtonStyle}"
                                Padding="0,8" Margin="0,0,0,8"/>
                        <Button Content="Import New Model" 
                                Style="{DynamicResource GhostButtonStyle}"
                                Padding="0,8"/>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- 3D Viewport -->
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" 
                    Padding="20" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1,0">
                <Grid>
                    <Border Background="{DynamicResource PrimaryDarkBrush}" 
                            CornerRadius="8" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
                        <Grid>
                            <!-- 3D Scene Placeholder -->
                            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock Text="🎭" FontSize="64" HorizontalAlignment="Center" Margin="0,0,0,16"/>
                                <TextBlock Text="3D Viewport" 
                                           Style="{DynamicResource HeadingSmallStyle}"
                                           Foreground="{DynamicResource AccentPurpleBrush}"
                                           HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                <TextBlock Text="Select a model to view in 3D space" 
                                           Style="{DynamicResource CaptionTextStyle}"
                                           Foreground="{DynamicResource TextMutedBrush}"/>
                            </StackPanel>
                            
                            <!-- Viewport Controls Overlay -->
                            <StackPanel VerticalAlignment="Top" HorizontalAlignment="Right" 
                                        Margin="16" Background="{DynamicResource SecondaryDarkBrush}"
                                        Orientation="Horizontal">
                                <Button Content="🔄" Style="{DynamicResource GhostButtonStyle}" 
                                        ToolTip="Orbit" Width="32" Height="32"/>
                                <Button Content="↔️" Style="{DynamicResource GhostButtonStyle}" 
                                        ToolTip="Pan" Width="32" Height="32"/>
                                <Button Content="🔍" Style="{DynamicResource GhostButtonStyle}" 
                                        ToolTip="Zoom" Width="32" Height="32"/>
                                <Button Content="🏠" Style="{DynamicResource GhostButtonStyle}" 
                                        ToolTip="Reset View" Width="32" Height="32"/>
                            </StackPanel>
                            
                            <!-- Render Mode Toggle -->
                            <StackPanel VerticalAlignment="Bottom" HorizontalAlignment="Left" 
                                        Margin="16" Background="{DynamicResource SecondaryDarkBrush}">
                                <ComboBox Style="{DynamicResource DarkComboBoxStyle}" Width="120">
                                    <ComboBoxItem Content="Solid" IsSelected="True"/>
                                    <ComboBoxItem Content="Wireframe"/>
                                    <ComboBoxItem Content="Textured"/>
                                    <ComboBoxItem Content="Lit"/>
                                </ComboBox>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Grid>
            </Border>
            
            <!-- Properties Panel -->
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="0,8,8,0" Padding="16">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="Model Properties" 
                                   Style="{DynamicResource HeadingSmallStyle}"
                                   Foreground="{DynamicResource AccentPurpleBrush}"
                                   Margin="0,0,0,16"/>
                        
                        <!-- Transform Controls -->
                        <Expander Header="Transform" IsExpanded="True" Margin="0,0,0,12">
                            <StackPanel Margin="0,8,0,0">
                                <TextBlock Text="Position" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox Grid.Column="0" Text="0.0" Style="{DynamicResource DarkTextBoxStyle}" Margin="0,0,2,0"/>
                                    <TextBox Grid.Column="1" Text="0.0" Style="{DynamicResource DarkTextBoxStyle}" Margin="2,0"/>
                                    <TextBox Grid.Column="2" Text="0.0" Style="{DynamicResource DarkTextBoxStyle}" Margin="2,0,0,0"/>
                                </Grid>
                                
                                <TextBlock Text="Rotation" Style="{DynamicResource CaptionTextStyle}" Margin="0,8,0,4"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox Grid.Column="0" Text="0°" Style="{DynamicResource DarkTextBoxStyle}" Margin="0,0,2,0"/>
                                    <TextBox Grid.Column="1" Text="0°" Style="{DynamicResource DarkTextBoxStyle}" Margin="2,0"/>
                                    <TextBox Grid.Column="2" Text="0°" Style="{DynamicResource DarkTextBoxStyle}" Margin="2,0,0,0"/>
                                </Grid>
                                
                                <TextBlock Text="Scale" Style="{DynamicResource CaptionTextStyle}" Margin="0,8,0,4"/>
                                <TextBox Text="1.0" Style="{DynamicResource DarkTextBoxStyle}"/>
                            </StackPanel>
                        </Expander>
                        
                        <!-- Model Info -->
                        <Expander Header="Model Information" IsExpanded="False" Margin="0,0,0,12">
                            <StackPanel Margin="0,8,0,0">
                                <Grid Margin="0,0,0,4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="Vertices:" Style="{DynamicResource CaptionTextStyle}"/>
                                    <TextBlock Grid.Column="1" Text="1,234" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Right"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="Triangles:" Style="{DynamicResource CaptionTextStyle}"/>
                                    <TextBlock Grid.Column="1" Text="2,468" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Right"/>
                                </Grid>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="Materials:" Style="{DynamicResource CaptionTextStyle}"/>
                                    <TextBlock Grid.Column="1" Text="3" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Right"/>
                                </Grid>
                            </StackPanel>
                        </Expander>
                        
                        <!-- Export Options -->
                        <Button Content="Export Model" 
                                Style="{DynamicResource PrimaryButtonStyle}"
                                Padding="0,8"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- ===== ADDITIONAL ENTHUSIAST TEMPLATES FOR COMPREHENSIVE COVERAGE ===== -->
    
    <!-- BaseModel Template - Professional Model Selection -->
    <DataTemplate x:Key="BaseModelTemplate">
        <StackPanel Margin="12">
            <TextBlock Text="Select Base Model" Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,0,4"/>
            <ComboBox ItemsSource="{Binding FilteredModels}" SelectedItem="{Binding SelectedModel}" Style="{DynamicResource DarkComboBoxStyle}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock>
                            <Run Text="{Binding Name}"/>
                            <Run Text=" ("/>
                            <Run Text="{Binding Size}"/>
                            <Run Text=")"/>
                        </TextBlock>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>

            <TextBlock Text="Inference Engine" Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,12,0,4"/>
            <ComboBox SelectedItem="{Binding SelectedRunner}" Style="{DynamicResource DarkComboBoxStyle}">
                <ComboBoxItem>llama.cpp</ComboBoxItem>
                <ComboBoxItem>vLLM</ComboBoxItem>
                <ComboBoxItem>ExLlamaV2</ComboBoxItem>
            </ComboBox>

            <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                <Button Content="Load" Command="{Binding LoadModelCommand}" CommandParameter="{Binding SelectedModel}" Style="{StaticResource PrimaryButtonStyle}"/>
                <Button Content="Unload" Command="{Binding UnloadModelCommand}" Style="{StaticResource SecondaryButtonStyle}" Margin="8,0,0,0"/>
            </StackPanel>
        </StackPanel>
    </DataTemplate>
    
    <!-- Advanced Template - Configuration Controls -->
    <DataTemplate x:Key="AdvancedTemplate">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="16">
                <TextBlock Text="Advanced Configuration" Style="{DynamicResource HeadingSmallStyle}" Foreground="{DynamicResource AccentYellowBrush}" Margin="0,0,0,16"/>
                <Border Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6" Padding="16">
                    <TextBlock Text="Load a model to access advanced configuration parameters." Style="{DynamicResource BodyTextStyle}" TextWrapping="Wrap"/>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </DataTemplate>
    
    <!-- ControlNets Template -->
    <DataTemplate x:Key="ControlNetsTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="250"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6,0,0,6" Padding="16">
                <StackPanel>
                    <TextBlock Text="ControlNet Configuration" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <ComboBox Style="{DynamicResource DarkComboBoxStyle}" Margin="0,0,0,8">
                        <ComboBoxItem>Canny Edge</ComboBoxItem>
                        <ComboBoxItem>OpenPose</ComboBoxItem>
                        <ComboBoxItem>Depth Map</ComboBoxItem>
                    </ComboBox>
                    <TextBlock Text="Conditioning Scale" Style="{DynamicResource CaptionTextStyle}" Margin="0,8,0,4"/>
                    <Slider Value="1.0" Minimum="0.1" Maximum="2.0" TickFrequency="0.1"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" Padding="16" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1,0">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="Reference Image Preview" Style="{DynamicResource BodyTextStyle}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="Drop or select reference image" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="0,6,6,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Processing Options" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <CheckBox Content="Preprocessor" Style="{DynamicResource DarkCheckBoxStyle}" IsChecked="True" Margin="0,4"/>
                    <CheckBox Content="Low VRAM Mode" Style="{DynamicResource DarkCheckBoxStyle}" Margin="0,4"/>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- VAEs Template -->
    <DataTemplate x:Key="VAEsTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="300"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6,0,0,6" Padding="16">
                <StackPanel>
                    <TextBlock Text="VAE Selection" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,16"/>
                    <ComboBox Style="{DynamicResource DarkComboBoxStyle}" Margin="0,0,0,12">
                        <ComboBoxItem>Default VAE</ComboBoxItem>
                        <ComboBoxItem>kl-f8-anime2.ckpt</ComboBoxItem>
                        <ComboBoxItem>vae-ft-mse-840000-ema.ckpt</ComboBoxItem>
                    </ComboBox>
                    <TextBlock Text="VAEs improve image quality and can affect color saturation, contrast, and overall aesthetic." Style="{DynamicResource CaptionTextStyle}" TextWrapping="Wrap"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="0,6,6,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Quality Settings" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <TextBlock Text="Processing Mode" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <ComboBox Style="{DynamicResource DarkComboBoxStyle}" Margin="0,0,0,12">
                        <ComboBoxItem>Standard</ComboBoxItem>
                        <ComboBoxItem>High Quality</ComboBoxItem>
                        <ComboBoxItem>Tiled (Low VRAM)</ComboBoxItem>
                    </ComboBox>
                    <CheckBox Content="Enable VAE optimization" Style="{DynamicResource DarkCheckBoxStyle}" IsChecked="True"/>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- Additional compact templates for remaining views -->
    <DataTemplate x:Key="HypernetworksTemplate">
        <StackPanel Margin="16">
            <TextBlock Text="Hypernetwork Management" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
            <Border Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6" Padding="16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <ComboBox Style="{DynamicResource DarkComboBoxStyle}"><ComboBoxItem>None Selected</ComboBoxItem></ComboBox>
                    <TextBlock Grid.Column="1" Text="Strength: 1.0" Style="{DynamicResource BodyTextStyle}" VerticalAlignment="Center" Margin="12,0,0,0"/>
                </Grid>
            </Border>
        </StackPanel>
    </DataTemplate>
    
    <DataTemplate x:Key="EmbeddingsTemplate">
        <StackPanel Margin="16">
            <TextBlock Text="Textual Inversions" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
            <Border Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6" Padding="16">
                <TextBlock Text="Available embeddings will appear here after scanning model directories." Style="{DynamicResource CaptionTextStyle}" TextWrapping="Wrap"/>
            </Border>
        </StackPanel>
    </DataTemplate>
    
    <!-- ENHANCED ENTHUSIAST InpaintingTemplate - Collapsible Panels + Contextual Guidance -->
    <DataTemplate x:Key="InpaintingTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="280"/>
            </Grid.ColumnDefinitions>
            
            <!-- Advanced Controls Panel -->
            <Border Grid.Column="0" 
                    Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="8,0,0,8" 
                    Padding="16">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <!-- Header with Status -->
                        <Grid Margin="0,0,0,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Inpainting Studio" 
                                       Style="{DynamicResource HeadingMediumStyle}"/>
                            <Border Grid.Column="1"
                                    Background="{DynamicResource SuccessBrush}"
                                    Padding="6,2"
                                    CornerRadius="4">
                                <TextBlock Text="READY" 
                                           Foreground="{DynamicResource TextPrimaryBrush}"
                                           FontSize="9"
                                           FontWeight="Bold"/>
                            </Border>
                        </Grid>
                        
                        <!-- Essential Controls (Always Visible) -->
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                Padding="12" 
                                CornerRadius="6"
                                Margin="0,0,0,12">
                            <StackPanel>
                                <TextBlock Text="Essential Settings" 
                                           Style="{DynamicResource CaptionTextStyle}"
                                           FontWeight="SemiBold"
                                           Margin="0,0,0,8"/>
                                
                                <!-- Source Image -->
                                <Button Content="📁 Load Source Image" 
                                        Command="{Binding LoadImageCommand}"
                                        Style="{DynamicResource SecondaryButtonStyle}"
                                        Margin="0,0,0,8"/>
                                
                                <!-- Prompt -->
                                <TextBlock Text="Transformation Description" 
                                           Style="{DynamicResource CaptionTextStyle}"
                                           Margin="0,0,0,4"/>
                                <TextBox Text="{Binding Prompt, UpdateSourceTrigger=PropertyChanged}" 
                                         Style="{DynamicResource DarkTextBoxStyle}"
                                         MinHeight="60" 
                                         TextWrapping="Wrap"
                                         Margin="0,0,0,8"/>
                                
                                <!-- Generate Button -->
                                <Button Content="🎨 Generate Inpainting" 
                                        Command="{Binding GenerateCommand}"
                                        Style="{DynamicResource PrimaryButtonStyle}"
                                        Padding="12,8"/>
                            </StackPanel>
                        </Border>
                        
                        <!-- Collapsible Mask Controls -->
                        <Expander Header="Mask &amp; Brush Settings" 
                                  IsExpanded="False"
                                  Margin="0,0,0,8">
                            <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                    Padding="12" 
                                    CornerRadius="6"
                                    Margin="0,4,0,0">
                                <StackPanel>
                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <!-- Brush Size -->
                                        <StackPanel Grid.Column="0" Margin="0,0,8,0">
                                            <TextBlock Text="Brush Size" 
                                                       Style="{DynamicResource CaptionTextStyle}"
                                                       Margin="0,0,0,4"/>
                                            <Slider Value="{Binding BrushSize}" 
                                                    Minimum="5" 
                                                    Maximum="100"
                                                    TickFrequency="5"/>
                                            <TextBlock Text="{Binding BrushSize, StringFormat={}Size: {0}px}" 
                                                       Style="{DynamicResource CodeTextStyle}"
                                                       FontSize="10"
                                                       HorizontalAlignment="Center"/>
                                        </StackPanel>
                                        
                                        <!-- Mask Blur -->
                                        <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                            <TextBlock Text="Mask Blur" 
                                                       Style="{DynamicResource CaptionTextStyle}"
                                                       Margin="0,0,0,4"/>
                                            <Slider Value="{Binding MaskBlur}" 
                                                    Minimum="0" 
                                                    Maximum="32"
                                                    TickFrequency="2"/>
                                            <TextBlock Text="{Binding MaskBlur, StringFormat={}Blur: {0}px}" 
                                                       Style="{DynamicResource CodeTextStyle}"
                                                       FontSize="10"
                                                       HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>
                                    
                                    <!-- Brush Tools -->
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <Button Content="🖌️ Paint" 
                                                Style="{DynamicResource GhostButtonStyle}"
                                                Padding="8,4"
                                                Command="{Binding SetBrushModeCommand}"
                                                CommandParameter="Paint"
                                                Margin="0,0,4,0"/>
                                        <Button Content="🧽 Erase" 
                                                Style="{DynamicResource GhostButtonStyle}"
                                                Padding="8,4"
                                                Command="{Binding SetBrushModeCommand}"
                                                CommandParameter="Erase"
                                                Margin="0,0,4,0"/>
                                        <Button Content="🗑️ Clear" 
                                                Style="{DynamicResource GhostButtonStyle}"
                                                Padding="8,4"
                                                Command="{Binding ClearMaskCommand}"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </Expander>
                        
                        <!-- Collapsible Generation Settings -->
                        <Expander Header="Generation Parameters" 
                                  IsExpanded="False"
                                  Margin="0,0,0,8">
                            <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                    Padding="12" 
                                    CornerRadius="6"
                                    Margin="0,4,0,0">
                                <StackPanel>
                                    <!-- Strength -->
                                    <StackPanel Margin="0,0,0,12">
                                        <TextBlock Text="Inpainting Strength" 
                                                   Style="{DynamicResource CaptionTextStyle}"
                                                   Margin="0,0,0,4"/>
                                        <Slider Value="{Binding Strength}" 
                                                Minimum="0.1" 
                                                Maximum="1.0"
                                                TickFrequency="0.1"/>
                                        <TextBlock Text="{Binding Strength, StringFormat={}Strength: {0:F1}}" 
                                                   Style="{DynamicResource CodeTextStyle}"
                                                   FontSize="10"
                                                   HorizontalAlignment="Center"/>
                                    </StackPanel>
                                    
                                    <!-- Steps and CFG -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Grid.Column="0" Margin="0,0,8,0">
                                            <TextBlock Text="Steps" 
                                                       Style="{DynamicResource CaptionTextStyle}"
                                                       Margin="0,0,0,4"/>
                                            <Slider Value="{Binding Steps}" 
                                                    Minimum="10" 
                                                    Maximum="50"/>
                                        </StackPanel>
                                        
                                        <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                            <TextBlock Text="CFG Scale" 
                                                       Style="{DynamicResource CaptionTextStyle}"
                                                       Margin="0,0,0,4"/>
                                            <Slider Value="{Binding CfgScale}" 
                                                    Minimum="1" 
                                                    Maximum="20"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </Expander>
                        
                        <!-- Contextual Guidance -->
                        <Border Background="{DynamicResource AccentRedBrush}"
                                Padding="10,6"
                                CornerRadius="6"
                                Margin="0,8,0,0"
                                Opacity="0.9">
                            <TextBlock Text="💡 Pro Tip: Lower strength preserves more of the original image. Higher values create more dramatic changes." 
                                       Style="{DynamicResource CaptionTextStyle}"
                                       Foreground="{DynamicResource TextPrimaryBrush}"
                                       FontSize="10"
                                       TextWrapping="Wrap"/>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>
            
            <!-- Main Canvas Area -->
            <Border Grid.Column="1" 
                    Background="{DynamicResource TertiaryDarkBrush}" 
                    Padding="12">
                <Grid>
                    <!-- Canvas Content -->
                    <Border Background="{DynamicResource PrimaryDarkBrush}"
                            CornerRadius="4"
                            BorderBrush="{DynamicResource BorderBrush}"
                            BorderThickness="1">
                        <Grid>
                            <Image Source="{Binding SourceImageSource}" 
                                   Stretch="Uniform"
                                   Visibility="{Binding HasSourceImage, Converter={StaticResource BoolToVisibility}}"/>
                            <StackPanel HorizontalAlignment="Center" 
                                        VerticalAlignment="Center"
                                        Visibility="{Binding HasSourceImage, Converter={StaticResource BoolToVisibility}, ConverterParameter=Inverted}">
                                <TextBlock Text="🖼️" 
                                           FontSize="64" 
                                           HorizontalAlignment="Center"
                                           Margin="0,0,0,12"
                                           Opacity="0.3"/>
                                <TextBlock Text="Load an image to start inpainting" 
                                           Style="{DynamicResource HeadingSmallStyle}"
                                           HorizontalAlignment="Center"
                                           Foreground="{DynamicResource TextMutedBrush}"/>
                                <TextBlock Text="Paint over areas you want to change" 
                                           Style="{DynamicResource CaptionTextStyle}"
                                           HorizontalAlignment="Center"
                                           Foreground="{DynamicResource TextMutedBrush}"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                    
                    <!-- Canvas Tools Overlay -->
                    <StackPanel HorizontalAlignment="Right" 
                                VerticalAlignment="Top"
                                Orientation="Horizontal"
                                Margin="8">
                        <Button Content="🔍+" 
                                Style="{DynamicResource GhostButtonStyle}"
                                Padding="6"
                                ToolTip="Zoom in"
                                Command="{Binding ZoomInCommand}"
                                Margin="0,0,2,0"/>
                        <Button Content="🔍-" 
                                Style="{DynamicResource GhostButtonStyle}"
                                Padding="6"
                                ToolTip="Zoom out"
                                Command="{Binding ZoomOutCommand}"
                                Margin="0,0,2,0"/>
                        <Button Content="🔄" 
                                Style="{DynamicResource GhostButtonStyle}"
                                Padding="6"
                                ToolTip="Reset view"
                                Command="{Binding ResetViewCommand}"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Results & History Panel -->
            <Border Grid.Column="2" 
                    Background="{DynamicResource SecondaryDarkBrush}" 
                    CornerRadius="0,8,8,0" 
                    Padding="16">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <!-- Results Header -->
                        <TextBlock Text="Generation Results" 
                                   Style="{DynamicResource HeadingMediumStyle}"
                                   Margin="0,0,0,12"/>
                        
                        <!-- Current Result -->
                        <Border Background="{DynamicResource TertiaryDarkBrush}" 
                                CornerRadius="6" 
                                Padding="12"
                                Margin="0,0,0,12">
                            <StackPanel>
                                <TextBlock Text="Current Result" 
                                           Style="{DynamicResource CaptionTextStyle}"
                                           FontWeight="SemiBold"
                                           Margin="0,0,0,8"/>
                                <Border Background="{DynamicResource PrimaryDarkBrush}"
                                        Height="120"
                                        CornerRadius="4"
                                        Margin="0,0,0,8">
                                    <Image Source="{Binding GeneratedImageSource}" 
                                           Stretch="Uniform"
                                           Visibility="{Binding HasGeneratedImage, Converter={StaticResource BoolToVisibility}}"/>
                                </Border>
                                <StackPanel Orientation="Horizontal">
                                    <Button Content="💾" 
                                            Style="{DynamicResource GhostButtonStyle}"
                                            Padding="6,4"
                                            ToolTip="Save result"
                                            Command="{Binding SaveCommand}"
                                            Margin="0,0,4,0"/>
                                    <Button Content="🔄" 
                                            Style="{DynamicResource GhostButtonStyle}"
                                            Padding="6,4"
                                            ToolTip="Regenerate"
                                            Command="{Binding RegenerateCommand}"
                                            Margin="0,0,4,0"/>
                                    <Button Content="📋" 
                                            Style="{DynamicResource GhostButtonStyle}"
                                            Padding="6,4"
                                            ToolTip="Copy to clipboard"
                                            Command="{Binding CopyToClipboardCommand}"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                        
                        <!-- Generation History -->
                        <TextBlock Text="Recent Results" 
                                   Style="{DynamicResource CaptionTextStyle}"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,8"/>
                        
                        <ItemsControl ItemsSource="{Binding GenerationHistory}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{DynamicResource TertiaryDarkBrush}"
                                            CornerRadius="4"
                                            Padding="8"
                                            Margin="0,0,0,6">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="60"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Image Grid.Column="0"
                                                   Source="{Binding Thumbnail}"
                                                   Width="52" Height="52"
                                                   Stretch="UniformToFill"/>
                                            <StackPanel Grid.Column="1" 
                                                        Margin="8,0,0,0">
                                                <TextBlock Text="{Binding Timestamp, StringFormat={}HH:mm:ss}" 
                                                           Style="{DynamicResource CodeTextStyle}"
                                                           FontSize="10"/>
                                                <TextBlock Text="{Binding Settings}" 
                                                           Style="{DynamicResource CaptionTextStyle}"
                                                           FontSize="9"
                                                           TextTrimming="CharacterEllipsis"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- Image2Image Template -->
    <DataTemplate x:Key="Image2ImageTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="280"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="200"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6,0,0,6" Padding="12">
                <StackPanel>
                    <TextBlock Text="Image Transformation" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <TextBlock Text="Source Image" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <Button Content="Load Image" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,0,8"/>
                    <Border Background="{DynamicResource TertiaryDarkBrush}" Height="100" CornerRadius="4" Margin="0,0,0,12"/>
                    <TextBlock Text="Transformation Strength" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <Slider Value="0.7" Minimum="0.1" Maximum="1.0"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" Padding="8">
                <TextBlock Text="Result Preview" Style="{DynamicResource BodyTextStyle}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Border>
            
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="0,6,6,0" Padding="12">
                <TextBlock Text="Generation History" Style="{DynamicResource HeadingSmallStyle}"/>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- Upscaling Template -->
    <DataTemplate x:Key="UpscalingTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="280"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="200"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6,0,0,6" Padding="12">
                <StackPanel>
                    <TextBlock Text="Image Upscaling" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <TextBlock Text="Upscale Method" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <ComboBox Style="{DynamicResource DarkComboBoxStyle}" Margin="0,0,0,8">
                        <ComboBoxItem Content="ESRGAN 4x" IsSelected="True"/>
                        <ComboBoxItem Content="Real-ESRGAN"/>
                        <ComboBoxItem Content="Waifu2x"/>
                    </ComboBox>
                    <TextBlock Text="Scale Factor" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <ComboBox Style="{DynamicResource DarkComboBoxStyle}">
                        <ComboBoxItem Content="2x"/>
                        <ComboBoxItem Content="4x" IsSelected="True"/>
                        <ComboBoxItem Content="8x"/>
                    </ComboBox>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" Padding="8">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="Before/After Comparison" Style="{DynamicResource BodyTextStyle}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="Load image to begin upscaling" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="0,6,6,0" Padding="12">
                <StackPanel>
                    <TextBlock Text="Quality Settings" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,8"/>
                    <CheckBox Content="Noise Reduction" Style="{DynamicResource DarkCheckBoxStyle}" IsChecked="True" Margin="0,4"/>
                    <CheckBox Content="Preserve Details" Style="{DynamicResource DarkCheckBoxStyle}" IsChecked="True" Margin="0,4"/>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- Video2Video Template -->
    <DataTemplate x:Key="Video2VideoTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="250"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6,0,0,6" Padding="16">
                <StackPanel>
                    <TextBlock Text="Video Transformation" Style="{DynamicResource HeadingSmallStyle}" Foreground="{DynamicResource AccentPurpleBrush}" Margin="0,0,0,16"/>
                    <TextBlock Text="Source Video" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <Button Content="Load Video File" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,0,12"/>
                    <TextBlock Text="Style Prompt" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <TextBox Style="{DynamicResource DarkTextBoxStyle}" MinHeight="60" TextWrapping="Wrap" AcceptsReturn="True" Margin="0,0,0,12"/>
                    <TextBlock Text="Style Strength" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <Slider Value="0.5" Minimum="0.1" Maximum="1.0" TickFrequency="0.1"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" Padding="16">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="🎬" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                    <TextBlock Text="Video Preview" Style="{DynamicResource HeadingSmallStyle}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="Original and transformed video comparison" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="0,6,6,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Processing Queue" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <TextBlock Text="Video processing jobs will appear here" Style="{DynamicResource CaptionTextStyle}" TextWrapping="Wrap"/>
                    </ScrollViewer>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- MotionControl Template -->
    <DataTemplate x:Key="MotionControlTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="250"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6,0,0,6" Padding="16">
                <StackPanel>
                    <TextBlock Text="Motion Configuration" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,16"/>
                    <TextBlock Text="Camera Motion" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <ComboBox Style="{DynamicResource DarkComboBoxStyle}" Margin="0,0,0,12">
                        <ComboBoxItem Content="Static" IsSelected="True"/>
                        <ComboBoxItem Content="Pan Left"/>
                        <ComboBoxItem Content="Pan Right"/>
                        <ComboBoxItem Content="Zoom In"/>
                        <ComboBoxItem Content="Zoom Out"/>
                    </ComboBox>
                    <TextBlock Text="Motion Speed" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <Slider Value="0.5" Minimum="0.1" Maximum="2.0" TickFrequency="0.1" Margin="0,0,0,12"/>
                    <TextBlock Text="Object Tracking" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <CheckBox Content="Enable tracking" Style="{DynamicResource DarkCheckBoxStyle}" Margin="0,4"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" Padding="16">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="🎯" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                    <TextBlock Text="Motion Canvas" Style="{DynamicResource HeadingSmallStyle}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="Visual motion path editor" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="0,6,6,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Timeline Controls" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <TextBlock Text="Keyframe editor for precise motion control" Style="{DynamicResource CaptionTextStyle}" TextWrapping="Wrap"/>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- TemporalEffects Template -->
    <DataTemplate x:Key="TemporalEffectsTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="250"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6,0,0,6" Padding="16">
                <StackPanel>
                    <TextBlock Text="Temporal Effects" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,16"/>
                    <TextBlock Text="Time Stretching" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <Slider Value="1.0" Minimum="0.25" Maximum="4.0" TickFrequency="0.25" Margin="0,0,0,12"/>
                    <CheckBox Content="Frame Interpolation" Style="{DynamicResource DarkCheckBoxStyle}" IsChecked="True" Margin="0,4"/>
                    <CheckBox Content="Motion Blur" Style="{DynamicResource DarkCheckBoxStyle}" Margin="0,4"/>
                    <CheckBox Content="Stabilization" Style="{DynamicResource DarkCheckBoxStyle}" Margin="0,4"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" Padding="16">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="⏱️" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                    <TextBlock Text="Effect Preview" Style="{DynamicResource HeadingSmallStyle}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="Real-time temporal effect visualization" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="0,6,6,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Effect Library" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <TextBlock Text="Pre-configured temporal effect presets" Style="{DynamicResource CaptionTextStyle}" TextWrapping="Wrap"/>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- Voice Template -->
    <DataTemplate x:Key="VoiceTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="250"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6,0,0,6" Padding="16">
                <StackPanel>
                    <TextBlock Text="Voice Overview" Style="{DynamicResource HeadingSmallStyle}" Foreground="{DynamicResource AccentPurpleBrush}" Margin="0,0,0,16"/>
                    <TextBlock Text="Quick Actions" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,8"/>
                    <Button Content="Text-to-Speech" Style="{DynamicResource PrimaryButtonStyle}" Margin="0,0,0,6"/>
                    <Button Content="Voice Cloning" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,0,6"/>
                    <Button Content="Real-time Synthesis" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,0,6"/>
                    <Button Content="Audio Processing" Style="{DynamicResource SecondaryButtonStyle}"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" Padding="16">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="🎤" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                    <TextBlock Text="Voice Synthesis Hub" Style="{DynamicResource HeadingSmallStyle}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="Select a voice feature to begin" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="0,6,6,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Voice Status" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <TextBlock Text="Ready" Style="{DynamicResource BodyTextStyle}" Foreground="{DynamicResource AccentGreenBrush}" Margin="0,0,0,4"/>
                    <TextBlock Text="Available Voices: 5" Style="{DynamicResource CaptionTextStyle}"/>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    
    <!-- RealTimeSynthesis Template -->
    
    <!-- Entities Template -->
    <DataTemplate x:Key="EntitiesTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="250"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6,0,0,6" Padding="16">
                <StackPanel>
                    <TextBlock Text="Entity Management" Style="{DynamicResource HeadingSmallStyle}" Foreground="{DynamicResource AccentPurpleBrush}" Margin="0,0,0,16"/>
                    <Button Content="Create New Entity" Style="{DynamicResource PrimaryButtonStyle}" Margin="0,0,0,8"/>
                    <Button Content="Import Entity" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,0,8"/>
                    <Button Content="Entity Templates" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,0,16"/>
                    <TextBlock Text="Active Entities" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,8"/>
                    <ListBox Background="{DynamicResource TertiaryDarkBrush}" BorderThickness="1" BorderBrush="{DynamicResource BorderBrush}" MinHeight="100"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" Padding="16">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="👥" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                    <TextBlock Text="Entity Workspace" Style="{DynamicResource HeadingSmallStyle}" Foreground="{DynamicResource AccentPurpleBrush}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="Create or select an entity to begin" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="0,6,6,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Entity Stats" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <TextBlock Text="Total Entities: 0" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <TextBlock Text="Active: 0" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <TextBlock Text="Templates: 4" Style="{DynamicResource CaptionTextStyle}"/>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- BehavioralPatterns Template -->
    <DataTemplate x:Key="BehavioralPatternsTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="250"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6,0,0,6" Padding="16">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="Behavior Configuration" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,16"/>
                        <TextBlock Text="Personality Traits" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,8"/>
                        
                        <!-- Trait Sliders -->
                        <StackPanel>
                            <TextBlock Text="Creativity" Style="{DynamicResource CaptionTextStyle}" Margin="0,4,0,2"/>
                            <Slider Value="0.7" Minimum="0" Maximum="1" TickFrequency="0.1" Margin="0,0,0,8"/>
                            
                            <TextBlock Text="Formality" Style="{DynamicResource CaptionTextStyle}" Margin="0,4,0,2"/>
                            <Slider Value="0.5" Minimum="0" Maximum="1" TickFrequency="0.1" Margin="0,0,0,8"/>
                            
                            <TextBlock Text="Empathy" Style="{DynamicResource CaptionTextStyle}" Margin="0,4,0,2"/>
                            <Slider Value="0.8" Minimum="0" Maximum="1" TickFrequency="0.1" Margin="0,0,0,8"/>
                            
                            <TextBlock Text="Curiosity" Style="{DynamicResource CaptionTextStyle}" Margin="0,4,0,2"/>
                            <Slider Value="0.6" Minimum="0" Maximum="1" TickFrequency="0.1"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Border>
            
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" Padding="16">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="🧠" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                    <TextBlock Text="Behavioral Script Editor" Style="{DynamicResource HeadingSmallStyle}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="AI behavior scripting interface" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Center" Margin="0,0,0,16"/>
                    <Border Background="{DynamicResource PrimaryDarkBrush}" CornerRadius="4" Padding="16" MinWidth="300" MinHeight="200">
                        <TextBlock Text="// Entity behavioral patterns\n// Define conversation style, response patterns\n// and interaction preferences here" Style="{DynamicResource CodeTextStyle}" Foreground="{DynamicResource AccentGreenBrush}"/>
                    </Border>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="0,6,6,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Pattern Library" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <Border Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="4" Padding="8" Margin="0,0,0,6">
                                <StackPanel>
                                    <TextBlock Text="Conversational" FontWeight="SemiBold" FontSize="11"/>
                                    <TextBlock Text="Natural dialogue patterns" Style="{DynamicResource CaptionTextStyle}" FontSize="9"/>
                                </StackPanel>
                            </Border>
                            <Border Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="4" Padding="8" Margin="0,0,0,6">
                                <StackPanel>
                                    <TextBlock Text="Professional" FontWeight="SemiBold" FontSize="11"/>
                                    <TextBlock Text="Formal interaction style" Style="{DynamicResource CaptionTextStyle}" FontSize="9"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- InteractionTesting Template -->
    <DataTemplate x:Key="InteractionTestingTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="250"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6,0,0,6" Padding="16">
                <StackPanel>
                    <TextBlock Text="Test Configuration" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,16"/>
                    <TextBlock Text="Test Entity" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <ComboBox Style="{DynamicResource DarkComboBoxStyle}" Margin="0,0,0,12">
                        <ComboBoxItem Content="Select Entity..."/>
                    </ComboBox>
                    <TextBlock Text="Test Scenario" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <ComboBox Style="{DynamicResource DarkComboBoxStyle}" Margin="0,0,0,12">
                        <ComboBoxItem Content="Casual Conversation" IsSelected="True"/>
                        <ComboBoxItem Content="Problem Solving"/>
                        <ComboBoxItem Content="Creative Task"/>
                        <ComboBoxItem Content="Technical Query"/>
                    </ComboBox>
                    <Button Content="Start Test Session" Style="{DynamicResource PrimaryButtonStyle}"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" Padding="16">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <TextBlock Grid.Row="0" Text="Entity Interaction Test" Style="{DynamicResource HeadingSmallStyle}" HorizontalAlignment="Center" Margin="0,0,0,16"/>
                    
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Background="{DynamicResource PrimaryDarkBrush}" Padding="12">
                        <TextBlock Text="Conversation simulation will appear here..." Style="{DynamicResource CaptionTextStyle}" Foreground="{DynamicResource TextMutedBrush}"/>
                    </ScrollViewer>
                    
                    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,12,0,0">
                        <TextBox Style="{DynamicResource DarkTextBoxStyle}" Width="300" Margin="0,0,8,0" Text="Type test message..."/>
                        <Button Content="Send" Style="{DynamicResource PrimaryButtonStyle}" Padding="12,6"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="0,6,6,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Test Results" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <TextBlock Text="Response Time: --ms" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <TextBlock Text="Coherence: --" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                    <TextBlock Text="Personality Match: --%" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,12"/>
                    <Button Content="Export Test Log" Style="{DynamicResource SecondaryButtonStyle}" Padding="0,6"/>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- EntityManagement Template -->
    <DataTemplate x:Key="EntityManagementTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="250"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6,0,0,6" Padding="16">
                <StackPanel>
                    <TextBlock Text="Entity Library" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,16"/>
                    <TextBox Style="{DynamicResource DarkTextBoxStyle}" Text="Search entities..." Margin="0,0,0,12"/>
                    <ListBox Background="{DynamicResource TertiaryDarkBrush}" BorderThickness="1" BorderBrush="{DynamicResource BorderBrush}" MinHeight="250" Margin="0,0,0,12"/>
                    <StackPanel Orientation="Horizontal">
                        <Button Content="Edit" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,6,0"/>
                        <Button Content="Delete" Style="{DynamicResource DangerButtonStyle}" Margin="0,0,6,0"/>
                        <Button Content="Export" Style="{DynamicResource GhostButtonStyle}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="1" Background="{DynamicResource TertiaryDarkBrush}" Padding="16">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="Entity Details" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,16"/>
                        
                        <!-- Entity Information Display -->
                        <Border Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6" Padding="16" Margin="0,0,0,16">
                            <StackPanel>
                                <TextBlock Text="Entity Details Ready" Style="{DynamicResource BodyTextStyle}" HorizontalAlignment="Center"/>
                                <TextBlock Text="Choose an entity from the library to explore details" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Center" Margin="0,8,0,0"/>
                            </StackPanel>
                        </Border>
                        
                        <!-- Version History -->
                        <TextBlock Text="Version History" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,8"/>
                        <Border Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="6" Padding="12" MinHeight="100">
                            <TextBlock Text="Version history will appear here" Style="{DynamicResource CaptionTextStyle}"/>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>
            
            <Border Grid.Column="2" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="0,6,6,0" Padding="16">
                <StackPanel>
                    <TextBlock Text="Quick Actions" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,12"/>
                    <Button Content="Backup All Entities" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,0,6"/>
                    <Button Content="Import from File" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,0,6"/>
                    <Button Content="Entity Statistics" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,0,12"/>
                    
                    <TextBlock Text="Storage Info" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,8"/>
                    <TextBlock Text="Used: 0 MB" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,2"/>
                    <TextBlock Text="Available: 1024 MB" Style="{DynamicResource CaptionTextStyle}"/>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- ThreeDModels Template - Enthusiast Mode -->
    <DataTemplate x:Key="ThreeDModelsTemplate">
        <Border Padding="16" Background="{DynamicResource SecondaryDarkBrush}" CornerRadius="8">
            <Grid>
                <!-- Main Content (visible when 3D rendering is available) -->
                <StackPanel Visibility="{Binding Has3DRenderingCapability, Converter={StaticResource BoolToVisibility}}">
                    <!-- Professional Header -->
                    <TextBlock Text="3D Model Viewer" 
                               Style="{DynamicResource HeadingLargeStyle}"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,16"/>
                    
                    <!-- Load Model Section -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,16">
                        <Button Content="Load Model" 
                                Command="{Binding LoadModelCommand}"
                                Style="{DynamicResource PrimaryButtonStyle}"
                                Margin="0,0,8,0"/>
                        <Button Content="Import" 
                                Command="{Binding ImportCommand}"
                                Style="{DynamicResource SecondaryButtonStyle}"
                                Margin="0,0,8,0"/>
                        <Button Content="Recent" 
                                Command="{Binding ShowRecentCommand}"
                                Style="{DynamicResource SecondaryButtonStyle}"/>
                    </StackPanel>
                    
                    <!-- Camera Controls -->
                    <TextBlock Text="Camera Controls:" 
                               Style="{DynamicResource BodyTextStyle}"
                               Margin="0,0,0,8"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,16">
                        <Button Content="Rotate" Command="{Binding RotateCommand}" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,4,0"/>
                        <Button Content="Pan" Command="{Binding PanCommand}" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,4,0"/>
                        <Button Content="Zoom In" Command="{Binding ZoomInCommand}" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,4,0"/>
                        <Button Content="Zoom Out" Command="{Binding ZoomOutCommand}" Style="{DynamicResource SecondaryButtonStyle}" Margin="0,0,4,0"/>
                        <Button Content="Reset View" Command="{Binding ResetViewCommand}" Style="{DynamicResource SecondaryButtonStyle}"/>
                    </StackPanel>
                    
                    <!-- 3D Viewport -->
                    <Border Background="{DynamicResource TertiaryDarkBrush}" 
                            CornerRadius="4" 
                            MinHeight="300"
                            Margin="0,0,0,16">
                        <Grid>
                            <Viewport3D ClipToBounds="True"
                                       Visibility="{Binding HasModel, Converter={StaticResource BoolToVisibility}}">
                                <Viewport3D.Camera>
                                    <PerspectiveCamera Position="{Binding CameraPosition}" 
                                                       LookDirection="{Binding CameraLookDirection}"
                                                       UpDirection="0,1,0"
                                                       FieldOfView="{Binding FieldOfView}"/>
                                </Viewport3D.Camera>
                                <!-- ModelVisual3D would be bound here -->
                            </Viewport3D>
                            <TextBlock Text="Load a 3D model to begin viewing" 
                                       Style="{DynamicResource CaptionTextStyle}"
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Center"
                                       Visibility="{Binding HasModel, Converter={StaticResource BoolToVisibility}, ConverterParameter=Inverted}"/>
                        </Grid>
                    </Border>
                    
                    <!-- Model Information Panel -->
                    <Border Background="{DynamicResource TertiaryDarkBrush}" 
                            CornerRadius="4" 
                            Padding="12"
                            Visibility="{Binding HasModel, Converter={StaticResource BoolToVisibility}}"
                            Margin="0,0,0,16">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="{Binding ModelName}" Style="{DynamicResource BodyTextStyle}" FontWeight="Bold"/>
                                <TextBlock Text="{Binding ModelFormat}" Style="{DynamicResource CaptionTextStyle}"/>
                            </StackPanel>
                            <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                <TextBlock Text="{Binding VertexCount, StringFormat={}{0:N0} vertices}" Style="{DynamicResource CaptionTextStyle}"/>
                                <TextBlock Text="{Binding TriangleCount, StringFormat={}{0:N0} triangles}" Style="{DynamicResource CaptionTextStyle}"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2" HorizontalAlignment="Right">
                                <TextBlock Text="{Binding FileSize}" Style="{DynamicResource CaptionTextStyle}"/>
                                <TextBlock Text="{Binding LoadTime}" Style="{DynamicResource CaptionTextStyle}"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                    
                    <!-- Action Buttons -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Content="Export Screenshot" 
                                Command="{Binding SaveScreenshotCommand}"
                                Style="{DynamicResource SecondaryButtonStyle}"
                                Visibility="{Binding HasModel, Converter={StaticResource BoolToVisibility}}"
                                Margin="0,0,8,0"/>
                        <Button Content="Export Model" 
                                Command="{Binding ExportModelCommand}"
                                Style="{DynamicResource SecondaryButtonStyle}"
                                Visibility="{Binding HasModel, Converter={StaticResource BoolToVisibility}}"
                                Margin="0,0,8,0"/>
                        <Button Content="Clear" 
                                Command="{Binding ClearModelCommand}"
                                Style="{DynamicResource SecondaryButtonStyle}"
                                Visibility="{Binding HasModel, Converter={StaticResource BoolToVisibility}}"/>
                    </StackPanel>
                </StackPanel>
                
                <!-- Capability Error State (visible when 3D rendering is not available) -->
                <Border Background="{DynamicResource ErrorBrush}" Padding="16" CornerRadius="4"
                        Visibility="{Binding Has3DRenderingCapability, Converter={StaticResource BoolToVisibility}, ConverterParameter=Inverted}">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="3D Rendering Not Available" 
                                   Foreground="{DynamicResource TextPrimaryBrush}" 
                                   FontWeight="Bold"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,8"/>
                        <TextBlock Text="{Binding ThreeDRenderingError}" 
                                   Foreground="{DynamicResource TextPrimaryBrush}" 
                                   TextWrapping="Wrap"
                                   HorizontalAlignment="Center"/>
                        <Button Content="Switch to Compatible Model" 
                                Command="{Binding SwitchToCompatibleModelCommand}"
                                Style="{DynamicResource SecondaryButtonStyle}"
                                Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </DataTemplate>
    
    <!-- ModelPropertiesPanel Template -->
    <DataTemplate x:Key="ModelPropertiesPanelTemplate">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="16">
                <TextBlock Text="3D Model Properties" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,16"/>
                
                <Expander Header="Transform" IsExpanded="True" Margin="0,0,0,12">
                    <Grid Margin="0,8,0,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Position Controls -->
                        <StackPanel Grid.Row="0" Margin="0,0,0,8">
                            <TextBlock Text="Position" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" Text="0.0" Style="{DynamicResource DarkTextBoxStyle}" Margin="0,0,2,0"/>
                                <TextBox Grid.Column="1" Text="0.0" Style="{DynamicResource DarkTextBoxStyle}" Margin="2,0"/>
                                <TextBox Grid.Column="2" Text="0.0" Style="{DynamicResource DarkTextBoxStyle}" Margin="2,0,0,0"/>
                            </Grid>
                        </StackPanel>
                        
                        <!-- Rotation Controls -->
                        <StackPanel Grid.Row="1" Margin="0,0,0,8">
                            <TextBlock Text="Rotation (degrees)" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" Text="0" Style="{DynamicResource DarkTextBoxStyle}" Margin="0,0,2,0"/>
                                <TextBox Grid.Column="1" Text="0" Style="{DynamicResource DarkTextBoxStyle}" Margin="2,0"/>
                                <TextBox Grid.Column="2" Text="0" Style="{DynamicResource DarkTextBoxStyle}" Margin="2,0,0,0"/>
                            </Grid>
                        </StackPanel>
                        
                        <!-- Scale Controls -->
                        <StackPanel Grid.Row="2">
                            <TextBlock Text="Scale" Style="{DynamicResource CaptionTextStyle}" Margin="0,0,0,4"/>
                            <TextBox Text="1.0" Style="{DynamicResource DarkTextBoxStyle}"/>
                        </StackPanel>
                    </Grid>
                </Expander>
                
                <Expander Header="Model Information" IsExpanded="False">
                    <StackPanel Margin="0,8,0,0">
                        <Grid Margin="0,0,0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="Vertices:" Style="{DynamicResource CaptionTextStyle}"/>
                            <TextBlock Grid.Column="1" Text="--" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <Grid Margin="0,0,0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="Triangles:" Style="{DynamicResource CaptionTextStyle}"/>
                            <TextBlock Grid.Column="1" Text="--" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="Materials:" Style="{DynamicResource CaptionTextStyle}"/>
                            <TextBlock Grid.Column="1" Text="--" Style="{DynamicResource CaptionTextStyle}" HorizontalAlignment="Right"/>
                        </Grid>
                    </StackPanel>
                </Expander>
            </StackPanel>
        </ScrollViewer>
    </DataTemplate>
    
    <!-- ModelTreeView Template -->
    <DataTemplate x:Key="ModelTreeViewTemplate">
        <StackPanel Margin="16">
            <TextBlock Text="3D Model Browser" Style="{DynamicResource HeadingSmallStyle}" Margin="0,0,0,16"/>
            
            <TreeView Background="Transparent" BorderThickness="0">
                <TreeViewItem Header="📁 Models" IsExpanded="True">
                    <TreeViewItem Header="📁 Characters">
                        <TreeViewItem Header="🧙‍♂️ wizard.fbx"/>
                        <TreeViewItem Header="👩‍🚀 astronaut.obj"/>
                        <TreeViewItem Header="🦾 robot.blend"/>
                    </TreeViewItem>
                    <TreeViewItem Header="📁 Environments">
                        <TreeViewItem Header="🏰 castle.fbx"/>
                        <TreeViewItem Header="🌍 terrain.obj"/>
                        <TreeViewItem Header="🏠 house.blend"/>
                    </TreeViewItem>
                    <TreeViewItem Header="📁 Objects">
                        <TreeViewItem Header="⚔️ sword.fbx"/>
                        <TreeViewItem Header="📚 book.obj"/>
                        <TreeViewItem Header="🏺 vase.blend"/>
                    </TreeViewItem>
                </TreeViewItem>
            </TreeView>
            
            <Button Content="Load Selected Model" Style="{DynamicResource PrimaryButtonStyle}" Margin="0,16,0,8"/>
            <Button Content="Import New Model" Style="{DynamicResource SecondaryButtonStyle}"/>
        </StackPanel>
    </DataTemplate>
    
    <!-- ViewportControl Template -->
    <DataTemplate x:Key="ViewportControlTemplate">
        <Grid>
            <Border Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="6" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
                <Grid>
                    <!-- 3D Scene Placeholder -->
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock Text="🎭" FontSize="64" HorizontalAlignment="Center" Margin="0,0,0,16"/>
                        <TextBlock Text="3D Viewport" Style="{DynamicResource HeadingSmallStyle}" Foreground="{DynamicResource AccentPurpleBrush}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                        <TextBlock Text="Load a 3D model to begin viewing" Style="{DynamicResource CaptionTextStyle}" Foreground="{DynamicResource TextMutedBrush}" HorizontalAlignment="Center"/>
                    </StackPanel>
                    
                    <!-- Viewport Controls Overlay -->
                    <StackPanel VerticalAlignment="Top" HorizontalAlignment="Right" Margin="16" Background="{DynamicResource SecondaryDarkBrush}" Orientation="Horizontal" Opacity="0.9">
                        <Button Content="🔄" Style="{DynamicResource GhostButtonStyle}" ToolTip="Orbit Camera" Width="32" Height="32"/>
                        <Button Content="↔️" Style="{DynamicResource GhostButtonStyle}" ToolTip="Pan View" Width="32" Height="32"/>
                        <Button Content="🔍" Style="{DynamicResource GhostButtonStyle}" ToolTip="Zoom" Width="32" Height="32"/>
                        <Button Content="🏠" Style="{DynamicResource GhostButtonStyle}" ToolTip="Reset View" Width="32" Height="32"/>
                    </StackPanel>
                    
                    <!-- Render Mode Controls -->
                    <StackPanel VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="16" Background="{DynamicResource SecondaryDarkBrush}" Opacity="0.9">
                        <ComboBox Style="{DynamicResource DarkComboBoxStyle}" Width="120">
                            <ComboBoxItem Content="Solid" IsSelected="True"/>
                            <ComboBoxItem Content="Wireframe"/>
                            <ComboBoxItem Content="Textured"/>
                            <ComboBoxItem Content="Lit"/>
                        </ComboBox>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </DataTemplate>
    
    <!-- ENTHUSIAST DASHBOARD: Balanced system info + activity tracking -->
    <DataTemplate x:Key="EnthusiastDashboardViewModelTemplate">
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <Grid Margin="24">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/> <!-- System Status -->
                    <RowDefinition Height="Auto"/> <!-- Quick Actions -->
                    <RowDefinition Height="*"/>    <!-- Main Content -->
                </Grid.RowDefinitions>

                <!-- System Health Bar -->
                <Border Grid.Row="0" Style="{StaticResource DarkCardStyle}" Margin="0,0,0,24">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Health Indicator -->
                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                            <Ellipse Width="16" Height="16" 
                                     Fill="{DynamicResource SuccessBrush}"
                                     VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="System Status" 
                                       Style="{StaticResource HeadingSmallStyle}"
                                       VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- System Info -->
                        <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                            <TextBlock Text="Model Active" 
                                       Style="{StaticResource CodeTextStyle}"
                                       VerticalAlignment="Center" Margin="0,0,24,0"/>
                            <TextBlock Text="4.2GB VRAM" 
                                       Style="{StaticResource CaptionTextStyle}"
                                       VerticalAlignment="Center" Margin="0,0,24,0"/>
                            <TextBlock Text="32 t/s" 
                                       Style="{StaticResource CaptionTextStyle}"
                                       VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- API Status -->
                        <TextBlock Grid.Column="2" 
                                   Text="Connected"
                                   Style="{StaticResource CaptionTextStyle}"
                                   Foreground="{DynamicResource SuccessBrush}"
                                   VerticalAlignment="Center"/>
                    </Grid>
                </Border>

                <!-- Expanded Quick Actions -->
                <Border Grid.Row="1" Style="{StaticResource DarkCardStyle}" Margin="0,0,0,24">
                    <StackPanel>
                        <TextBlock Text="🚀 Quick Actions" 
                                   Style="{StaticResource HeadingMediumStyle}"
                                   Margin="0,0,0,16"/>
                        
                        <!-- 6 Actions in 3x2 grid -->
                        <UniformGrid Columns="3" Rows="2">
                            <Button Content="💬 Chat" Style="{StaticResource PrimaryButtonStyle}" Margin="0,0,8,8" Padding="20,16"/>
                            <Button Content="🧠 Model" Style="{StaticResource SecondaryButtonStyle}" Margin="4,0,4,8" Padding="20,16"/>
                            <Button Content="🖼️ Image" Style="{StaticResource SecondaryButtonStyle}" Margin="8,0,0,8" Padding="20,16"/>
                            <Button Content="🎬 Video" Style="{StaticResource SecondaryButtonStyle}" Margin="0,0,8,0" Padding="20,16"/>
                            <Button Content="⏳ Jobs" Style="{StaticResource SecondaryButtonStyle}" Margin="4,0,4,0" Padding="20,16"/>
                            <Button Content="📊 Data" Style="{StaticResource SecondaryButtonStyle}" Margin="8,0,0,0" Padding="20,16"/>
                        </UniformGrid>
                    </StackPanel>
                </Border>

                <!-- Two-Column Activity + Stats -->
                <Grid Grid.Row="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Recent Activity -->
                    <Border Grid.Column="0" Style="{StaticResource DarkCardStyle}" Margin="0,0,12,0">
                        <StackPanel>
                            <TextBlock Text="📈 Recent Activity" Style="{StaticResource HeadingMediumStyle}" Margin="0,0,0,16"/>
                            <!-- Sample activity items -->
                            <Border Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="6" Padding="12,8" Margin="0,0,0,8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="💬" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="Chat Session" Style="{StaticResource BodyTextStyle}" FontWeight="SemiBold"/>
                                        <TextBlock Text="Generated 1,247 tokens" Style="{StaticResource CaptionTextStyle}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                    <TextBlock Grid.Column="2" Text="2m ago" Style="{StaticResource CaptionTextStyle}" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                            <Border Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="6" Padding="12,8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="🧠" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="Model Loaded" Style="{StaticResource BodyTextStyle}" FontWeight="SemiBold"/>
                                        <TextBlock Text="Qwen-2.5-32B-Q4_K_M" Style="{StaticResource CaptionTextStyle}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                    <TextBlock Grid.Column="2" Text="15m ago" Style="{StaticResource CaptionTextStyle}" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- System Statistics -->
                    <Border Grid.Column="1" Style="{StaticResource DarkCardStyle}" Margin="12,0,0,0">
                        <StackPanel>
                            <TextBlock Text="📊 System Overview" Style="{StaticResource HeadingMediumStyle}" Margin="0,0,0,16"/>
                            <!-- GPU Usage -->
                            <Border Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="6" Padding="16,12" Margin="0,0,0,12">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="🎮" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                    <TextBlock Grid.Column="1" Text="GPU Usage" Style="{StaticResource BodyTextStyle}" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="2" Text="67%" Style="{StaticResource HeadingSmallStyle}" Foreground="{DynamicResource AccentRedBrush}" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                            <!-- Memory Usage -->
                            <Border Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="6" Padding="16,12" Margin="0,0,0,12">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="🧠" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                    <TextBlock Grid.Column="1" Text="VRAM Usage" Style="{StaticResource BodyTextStyle}" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="2" Text="4.2/8GB" Style="{StaticResource HeadingSmallStyle}" Foreground="{DynamicResource AccentRedBrush}" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                            <!-- Performance -->
                            <Border Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="6" Padding="16,12">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="⚡" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                    <TextBlock Grid.Column="1" Text="Speed" Style="{StaticResource BodyTextStyle}" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="2" Text="32 t/s" Style="{StaticResource HeadingSmallStyle}" Foreground="{DynamicResource AccentRedBrush}" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>
        </ScrollViewer>
    </DataTemplate>
    
    <!-- ENTHUSIAST RUNNER MANAGER: Runner switching + detailed status + controls -->
    <DataTemplate x:Key="EnthusiastRunnerManagerViewModelTemplate">
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <Grid Margin="24">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/> <!-- Header + Status -->
                    <RowDefinition Height="Auto"/> <!-- Control Bar -->
                    <RowDefinition Height="*"/>    <!-- Main Content -->
                </Grid.RowDefinitions>

                <!-- Header + Active Runner Status -->
                <StackPanel Grid.Row="0" Margin="0,0,0,24">
                    <!-- Header -->
                    <StackPanel Margin="0,0,0,20">
                        <TextBlock Text="🏃‍♂️ Runner Manager"
                                   Style="{StaticResource HeadingLargeStyle}"
                                   Foreground="{DynamicResource AccentRedBrush}"/>
                        <TextBlock Text="Control and switch between LLM backends"
                                   Style="{StaticResource BodyTextStyle}"
                                   Margin="0,8,0,0"/>
                    </StackPanel>

                    <!-- Active Runner Status Bar -->
                    <Border Style="{StaticResource DarkCardStyle}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Health Indicator -->
                            <StackPanel Grid.Column="0" Orientation="Horizontal">
                                <Ellipse Width="20" Height="20" Fill="{DynamicResource SuccessBrush}" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                <StackPanel>
                                    <TextBlock Text="Active Runner" Style="{StaticResource CaptionTextStyle}"/>
                                    <TextBlock Text="LlamaServer" Style="{StaticResource HeadingMediumStyle}" Margin="0,2,0,0"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- Status Info -->
                            <StackPanel Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock Text="Running - Ready for requests" Style="{StaticResource BodyTextStyle}" HorizontalAlignment="Center"/>
                                <TextBlock Text="PID: 15432" Style="{StaticResource CaptionTextStyle}" FontFamily="Consolas" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                            </StackPanel>

                            <!-- Quick Controls -->
                            <StackPanel Grid.Column="2" Orientation="Horizontal">
                                <Button Content="🔄 Restart" Style="{StaticResource SecondaryButtonStyle}" Margin="0,0,8,0"/>
                                <Button Content="🔄 Refresh" Style="{StaticResource GhostButtonStyle}"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </StackPanel>

                <!-- Control Bar -->
                <Border Grid.Row="1" Style="{StaticResource DarkCardStyle}" Margin="0,0,0,20">
                    <StackPanel Orientation="Horizontal">
                        <Button Content="🔄 Switch Runner" Style="{StaticResource PrimaryButtonStyle}" Margin="0,0,12,0"/>
                        <Button Content="🚀 Start" Style="{StaticResource SecondaryButtonStyle}" Margin="0,0,8,0"/>
                        <Button Content="🛑 Stop" Style="{StaticResource AccentButtonStyle}" Margin="0,0,8,0"/>
                        <Button Content="⚙️ Configure" Style="{StaticResource GhostButtonStyle}"/>
                    </StackPanel>
                </Border>

                <!-- Two-Column Layout -->
                <Grid Grid.Row="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Available Runners -->
                    <Border Grid.Column="0" Style="{StaticResource DarkCardStyle}" Margin="0,0,12,0">
                        <StackPanel>
                            <TextBlock Text="🏃‍♂️ Available Runners" Style="{StaticResource HeadingMediumStyle}" Margin="0,0,0,16"/>
                            
                            <!-- Runner List -->
                            <StackPanel>
                                <!-- LlamaServer - Active -->
                                <Border Background="{DynamicResource TertiaryDarkBrush}"
                                        BorderBrush="{DynamicResource AccentRedBrush}"
                                        BorderThickness="2"
                                        CornerRadius="8"
                                        Padding="16,12"
                                        Margin="0,0,0,12"
                                        Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="🦙" FontSize="24" VerticalAlignment="Center" Margin="0,0,16,0"/>
                                        <StackPanel Grid.Column="1">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="LlamaServer" Style="{StaticResource HeadingSmallStyle}" VerticalAlignment="Center"/>
                                                <Border Background="{DynamicResource AccentRedBrush}" CornerRadius="4" Padding="6,2" Margin="12,0,0,0">
                                                    <TextBlock Text="ACTIVE" FontSize="10" FontWeight="Bold" Foreground="White"/>
                                                </Border>
                                            </StackPanel>
                                            <TextBlock Text="Fast CPU/GPU inference with llama.cpp backend" Style="{StaticResource BodyTextStyle}" Margin="0,4,0,0"/>
                                            <TextBlock Text="Type: llama-server" Style="{StaticResource CaptionTextStyle}" FontFamily="Consolas" Margin="0,4,0,0"/>
                                        </StackPanel>
                                        <TextBlock Grid.Column="2" Text="Running" Style="{StaticResource CaptionTextStyle}" Foreground="{DynamicResource SuccessBrush}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- vLLM -->
                                <Border Background="{DynamicResource TertiaryDarkBrush}"
                                        CornerRadius="8"
                                        Padding="16,12"
                                        Margin="0,0,0,12"
                                        Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="⚡" FontSize="24" VerticalAlignment="Center" Margin="0,0,16,0"/>
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="vLLM" Style="{StaticResource HeadingSmallStyle}"/>
                                            <TextBlock Text="High-throughput serving for production workloads" Style="{StaticResource BodyTextStyle}" Margin="0,4,0,0"/>
                                            <TextBlock Text="Type: vllm-server" Style="{StaticResource CaptionTextStyle}" FontFamily="Consolas" Margin="0,4,0,0"/>
                                        </StackPanel>
                                        <TextBlock Grid.Column="2" Text="Available" Style="{StaticResource CaptionTextStyle}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- ExLlamaV2 -->
                                <Border Background="{DynamicResource TertiaryDarkBrush}"
                                        CornerRadius="8"
                                        Padding="16,12"
                                        Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="🧠" FontSize="24" VerticalAlignment="Center" Margin="0,0,16,0"/>
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="ExLlamaV2" Style="{StaticResource HeadingSmallStyle}"/>
                                            <TextBlock Text="Optimized for creative generation and long contexts" Style="{StaticResource BodyTextStyle}" Margin="0,4,0,0"/>
                                            <TextBlock Text="Type: exllamav2-server" Style="{StaticResource CaptionTextStyle}" FontFamily="Consolas" Margin="0,4,0,0"/>
                                        </StackPanel>
                                        <TextBlock Grid.Column="2" Text="Available" Style="{StaticResource CaptionTextStyle}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- System Status & Info -->
                    <Border Grid.Column="1" Style="{StaticResource DarkCardStyle}" Margin="12,0,0,0">
                        <StackPanel>
                            <TextBlock Text="📊 System Status" Style="{StaticResource HeadingMediumStyle}" Margin="0,0,0,16"/>

                            <!-- Current Runner Info -->
                            <Border Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="6" Padding="12,8" Margin="0,0,0,16">
                                <StackPanel>
                                    <TextBlock Text="Active Runner Details" Style="{StaticResource CaptionTextStyle}" FontWeight="SemiBold"/>
                                    <Grid Margin="0,8,0,4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="Name:" Style="{StaticResource CaptionTextStyle}" MinWidth="50"/>
                                        <TextBlock Grid.Column="1" Text="LlamaServer" Style="{StaticResource BodyTextStyle}"/>
                                    </Grid>
                                    <Grid Margin="0,0,0,4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="Status:" Style="{StaticResource CaptionTextStyle}" MinWidth="50"/>
                                        <TextBlock Grid.Column="1" Text="Running" Style="{StaticResource BodyTextStyle}" Foreground="{DynamicResource SuccessBrush}"/>
                                    </Grid>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="PID:" Style="{StaticResource CaptionTextStyle}" MinWidth="50"/>
                                        <TextBlock Grid.Column="1" Text="15432" Style="{StaticResource CodeTextStyle}"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Performance Metrics -->
                            <Border Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="6" Padding="12,8" Margin="0,0,0,16">
                                <StackPanel>
                                    <TextBlock Text="Performance" Style="{StaticResource CaptionTextStyle}" FontWeight="SemiBold"/>
                                    <Grid Margin="0,8,0,4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="Speed:" Style="{StaticResource CaptionTextStyle}" MinWidth="50"/>
                                        <TextBlock Grid.Column="1" Text="32 tokens/sec" Style="{StaticResource BodyTextStyle}"/>
                                    </Grid>
                                    <Grid Margin="0,0,0,4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="Memory:" Style="{StaticResource CaptionTextStyle}" MinWidth="50"/>
                                        <TextBlock Grid.Column="1" Text="4.2GB VRAM" Style="{StaticResource BodyTextStyle}"/>
                                    </Grid>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="Uptime:" Style="{StaticResource CaptionTextStyle}" MinWidth="50"/>
                                        <TextBlock Grid.Column="1" Text="2h 34m" Style="{StaticResource BodyTextStyle}"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Quick Actions -->
                            <Border Background="{DynamicResource TertiaryDarkBrush}" CornerRadius="6" Padding="12">
                                <StackPanel>
                                    <TextBlock Text="Quick Actions" Style="{StaticResource CaptionTextStyle}" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                    <UniformGrid Columns="2">
                                        <Button Content="🔧 Config" Style="{StaticResource GhostButtonStyle}" Padding="8,6" Margin="0,0,4,4"/>
                                        <Button Content="📊 Stats" Style="{StaticResource GhostButtonStyle}" Padding="8,6" Margin="4,0,0,4"/>
                                        <Button Content="🔄 Reload" Style="{StaticResource GhostButtonStyle}" Padding="8,6" Margin="0,4,4,0"/>
                                        <Button Content="📋 Logs" Style="{StaticResource GhostButtonStyle}" Padding="8,6" Margin="4,4,0,0"/>
                                    </UniformGrid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>
        </ScrollViewer>
    </DataTemplate>
    
    <!-- Enthusiast Chat Toolbar Template -->
    <DataTemplate x:Key="ChatToolbarTemplate">
        <DockPanel LastChildFill="True" Margin="0,0,0,8">
            <!-- Left: Tabs/Title placeholder -->
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                <TextBlock Text="Conversations" Style="{StaticResource CaptionTextStyle}" Foreground="{DynamicResource TextSecondaryBrush}" VerticalAlignment="Center"/>
            </StackPanel>
            <!-- Right: Controls -->
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                <TextBlock Text="Temp" Style="{StaticResource CaptionTextStyle}" Foreground="{DynamicResource TextMutedBrush}" VerticalAlignment="Center"/>
                <TextBox Width="60" Margin="6,0,12,0" Text="{Binding Temperature, UpdateSourceTrigger=PropertyChanged, StringFormat=F2}" Style="{StaticResource DarkTextBoxStyle}"/>
                <TextBlock Text="top_p" Style="{StaticResource CaptionTextStyle}" Foreground="{DynamicResource TextMutedBrush}" VerticalAlignment="Center"/>
                <TextBox Width="60" Margin="6,0,12,0" Text="{Binding TopP, UpdateSourceTrigger=PropertyChanged, StringFormat=F2}" Style="{StaticResource DarkTextBoxStyle}"/>
                <TextBlock Text="max_tokens" Style="{StaticResource CaptionTextStyle}" Foreground="{DynamicResource TextMutedBrush}" VerticalAlignment="Center"/>
                <TextBox Width="70" Margin="6,0,12,0" Text="{Binding MaxTokens, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource DarkTextBoxStyle}"/>
                <TextBlock Text="T/s:" Style="{StaticResource CaptionTextStyle}" Foreground="{DynamicResource TextMutedBrush}" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding TokensPerSecond, StringFormat=F1}" Foreground="{DynamicResource TextSecondaryBrush}" VerticalAlignment="Center" Margin="4,0,0,0"/>
            </StackPanel>
        </DockPanel>
    </DataTemplate>

    <!-- Enthusiast Chat Input Template -->
    <DataTemplate x:Key="ChatInputTemplate">
        <StackPanel>
            <!-- System Prompt Editor -->
            <Expander Header="System Prompt" Background="{DynamicResource SecondaryDarkBrush}" Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,0,8">
                <TextBox Text="{Binding SystemPrompt, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource DarkTextBoxMultilineStyle}" TextWrapping="Wrap" MinHeight="60"/>
            </Expander>
            <!-- Input + Send/Stop -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox Grid.Column="0"
                         Text="{Binding UserInput, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource DarkTextBoxMultilineStyle}"
                         MinHeight="60"
                         MaxHeight="200"
                         TextWrapping="Wrap"
                         AcceptsReturn="True"
                         Margin="0,0,8,0"/>
                <Button Grid.Column="1"
                        Content="Send"
                        Command="{Binding SendCommand}"
                        Style="{StaticResource PrimaryButtonStyle}"
                        IsEnabled="{Binding CanSend}"/>
                <Button Grid.Column="2"
                        Content="Stop"
                        Command="{Binding StopCommand}"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Margin="8,0,0,0"
                        IsEnabled="{Binding IsStreaming}"/>
            </Grid>
        </StackPanel>
    </DataTemplate>

</ResourceDictionary>